<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Central Women's University - Class Attendance Manager</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body{font-family:'Inter',sans-serif;background-color:#f0f4f8;color:#334155;}
        .container{max-width:1200px;}
        .card{background-color:#fff;border-radius:1rem;box-shadow:0 10px 15px -3px rgba(0,0,0,.1),0 4px 6px -2px rgba(0,0,0,.05);}
        .btn-primary{background-color:#dc2626;color:#fff;border-radius:.5rem;padding:.75rem 1.5rem;transition:background-color .3s ease;}
        .btn-primary:hover{background-color:#b91c1c;}
        .btn-secondary{background-color:#6b7280;color:#fff;border-radius:.5rem;padding:.75rem 1.5rem;transition:background-color .3s ease;}
        .btn-secondary:hover{background-color:#4b5563;}
        input[type="text"],input[type="date"],input[type="time"],input[type="number"],select,textarea,input[type="password"]{border-radius:.5rem;border:1px solid #d1d5db;padding:.75rem 1rem;width:100%;transition:border-color .3s ease,box-shadow .3s ease;}
        input[type="text"]:focus,input[type="date"]:focus,input[type="time"]:focus,input[type="number"]:focus,select:focus,textarea:focus,input[type="password"]:focus{border-color:#dc2626;box-shadow:0 0 0 3px rgba(220,38,38,.2);outline:none;}
        table{width:100%;border-collapse:collapse;margin-top:1rem;}
        th,td{padding:.75rem;text-align:left;border-bottom:1px solid #e5e7eb;}
        th{background-color:#fee2e2;font-weight:600;color:#991b1b;}
        tr:hover{background-color:#fef2f2;}
        .nav-menu-item{position:relative;}
        .nav-menu-button{cursor:pointer;padding:.75rem 1.5rem;border-radius:.5rem;transition:background-color .3s ease,color .3s ease;white-space:nowrap;font-weight:500;color:#334155;}
        .nav-menu-button:hover{background-color:#fee2e2;color:#dc2626;}
        .nav-menu-button.active{background-color:#dc2626;color:#fff;}
        .submenu{display:none;position:absolute;top:100%;left:0;background-color:#fff;border-radius:.5rem;box-shadow:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -1px rgba(0,0,0,.06);min-width:180px;z-index:100;padding:.5rem 0;}
        .submenu.active{display:block;}
        .submenu-item{padding:.75rem 1.5rem;cursor:pointer;white-space:nowrap;transition:background-color .3s ease,color .3s ease;color:#334155;}
        .submenu-item:hover{background-color:#fee2e2;color:#dc2626;}
        .submenu-item.active{background-color:#fef2f2;color:#dc2626;font-weight:600;}
        .message-box{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background-color:#fff;padding:2rem;border-radius:1rem;box-shadow:0 10px 20px rgba(0,0,0,.2);z-index:1000;text-align:center;display:none;}
        .message-box-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.5);z-index:999;display:none;}
        @media print{body{font-family:'Times New Roman',serif!important;background-color:#fff;color:#000;margin:0;padding:0;font-size:10pt;}
        .container,#mainContent{box-shadow:none!important;border:none!important;padding:0!important;margin:0!important;width:100%!important;max-width:none!important;}
        .content-section{padding:15mm!important;margin-bottom:10mm;page-break-after:always;}
        .content-section:last-child{page-break-after:auto;}
        .print-header,.print-footer{display:none!important;}
        #loginSection,.nav-menu-item,.tab-buttons,form,.btn-primary,.btn-secondary,.message-box,.message-box-overlay,#loadingIndicator,.clash-report,.delete-btn{display:none!important;}
        table{border:1px solid #000;width:100%;font-size:9pt;}
        th,td{border:1px solid #000;padding:5px;text-align:left;background-color:#fff!important;color:#000!important;}
        th{font-weight:bold;}
        tr:nth-child(even){background-color:#f9f9f9!important;}
        #dragDropRoutineGrid{min-width:unset;width:100%;}
        .routine-grid-container{overflow-x:visible;border:none;}
        .routine-grid th,.routine-grid td{height:auto;vertical-align:middle;}
        .routine-item{background-color:#e0e0e0!important;color:#000!important;border:1px solid #ccc!important;box-shadow:none!important;margin-bottom:2px;padding:2px 5px;font-size:8pt;}}
        .modal{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.6);display:flex;justify-content:center;align-items:center;z-index:1000;overflow-y:auto;}
        .modal-content{background-color:#fff;padding:2rem;border-radius:1rem;box-shadow:0 10px 20px rgba(0,0,0,.2);width:90%;max-width:600px;max-height:90vh;overflow-y:auto;}
        .draggable-course{cursor:grab;background-color:#fef2f2;border:1px solid #dc2626;padding:.5rem;margin-bottom:.5rem;border-radius:.5rem;font-size:.875rem;font-weight:500;color:#991b1b;transition:transform .1s ease-in-out,box-shadow .1s ease-in-out;}
        .draggable-course:hover{transform:translateY(-2px);box-shadow:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -1px rgba(0,0,0,.06);}
        .draggable-course.dragging{opacity:.5;cursor:grabbing;}
        .routine-grid-container{overflow-x:auto;border:1px solid #e5e7eb;border-radius:.5rem;}
        .routine-grid{min-width:800px;border-collapse:collapse;}
        .routine-grid th,.routine-grid td{border:1px solid #e5e7eb;padding:.5rem;text-align:center;vertical-align:top;height:60px;}
        .routine-grid th{background-color:#fee2e2;font-weight:600;color:#991b1b;position:sticky;top:0;z-index:10;}
        .routine-grid td{background-color:#fff;}
        .routine-grid td.time-slot-header{background-color:#fef2f2;font-weight:500;color:#dc2626;position:sticky;left:0;z-index:10;}
        .drop-target.drag-over{background-color:#fce7f3;border:2px dashed #db2777;}
        .routine-item{background-color:#ef4444;color:#fff;border-radius:.5rem;padding:.25rem .5rem;font-size:.75rem;font-weight:600;margin-bottom:.25rem;display:flex;justify-content:space-between;align-items:center;}
        .routine-item .delete-btn{background:none;border:none;color:#fff;cursor:pointer;font-size:1rem;line-height:1;padding:0 .25rem;}
        .routine-item .delete-btn:hover{color:#fca5a5;}
        .clash-report{background-color:#fef2f2;border:1px solid #ef4444;border-radius:.5rem;padding:1rem;margin-top:1.5rem;}
        .clash-report h3{color:#dc2626;margin-bottom:.75rem;}
        .clash-report ul{list-style:disc;padding-left:1.25rem;}
        .clash-report li{margin-bottom:.5rem;color:#b91c1c;}
        .clash-report li.solution{color:#16a34a;font-weight:500;}
        .tab-buttons{display:flex;margin-bottom:1.5rem;border-bottom:2px solid #e5e7eb;}
        .tab-button{padding:.75rem 1.5rem;cursor:pointer;font-weight:600;color:#6b7280;border-bottom:2px solid transparent;transition:all .3s ease;}
        .tab-button:hover{color:#dc2626;}
        .tab-button.active{color:#dc2626;border-bottom-color:#dc2626;}
        .tab-content{display:none;}
        .tab-content.active{display:block;}
        .expandable-item{cursor:pointer;padding:.75rem 1rem;border-bottom:1px solid #e5e7eb;background-color:#fef2f2;font-weight:600;color:#dc2626;display:flex;justify-content:space-between;align-items:center;transition:background-color .2s ease;}
        .expandable-item:hover{background-color:#fee2e2;}
        .expandable-content{display:none;padding:1rem;background-color:#fff;border:1px solid #e5e7eb;border-top:none;margin-bottom:.5rem;}
        .expandable-content.active{display:block;}
        .expandable-item .arrow{transition:transform .2s ease;}
        .expandable-item.active .arrow{transform:rotate(90deg);}
    </style>
</head>
<body class="p-4 md:p-8">
    <div id="loginSection" class="flex items-center justify-center min-h-screen bg-gray-100">
        <div class="card p-8 w-full max-w-md">
            <h2 class="text-3xl font-bold text-center text-red-700 mb-6">Login</h2>
            <form id="loginForm" class="space-y-4">
                <div>
                    <label for="username" class="block text-gray-700 text-sm font-bold mb-2">Username:</label>
                    <input type="text" id="username" name="username" required class="focus:ring-red-500 focus:border-red-500">
                </div>
                <div>
                    <label for="password" class="block text-gray-700 text-sm font-bold mb-2">Password:</label>
                    <input type="password" id="password" name="password" required class="focus:ring-red-500 focus:border-red-500">
                </div>
                <div class="flex items-center mb-4">
                    <input type="checkbox" id="keepLoggedIn" class="h-4 w-4 text-red-600 focus:ring-red-500 border-gray-300 rounded">
                    <label for="keepLoggedIn" class="ml-2 text-gray-700 text-sm">Keep me logged in</label>
                </div>
                <button type="submit" class="btn-primary w-full">Login</button>
                <p id="loginError" class="text-red-500 text-center text-sm mt-2 hidden">Invalid username or password.</p>
            </form>
        </div>
    </div>
    <div id="mainContent" class="container mx-auto bg-white rounded-2xl shadow-xl p-6 md:p-10 hidden">
        <h1 class="text-4xl font-extrabold text-center text-red-800 mb-2">Central Women's University</h1>
        <h2 class="text-2xl font-bold text-center text-red-600 mb-8">Department of English Language and Literature</h2>
        <nav class="mb-8 flex flex-wrap justify-center gap-2">
            <div class="nav-menu-item">
                <button class="nav-menu-button" id="navHomeButton">Home</button>
            </div>
            <div class="nav-menu-item">
                <button class="nav-menu-button" data-target="academicManagementSubmenu">Academic Management</button>
                <div id="academicManagementSubmenu" class="submenu">
                    <div id="navCurricula" class="submenu-item">Curricula</div>
                    <div id="navStudents" class="submenu-item">Students</div>
                    <div id="navFaculty" class="submenu-item">Faculty</div>
                    <div id="navCourseOfferings" class="submenu-item">Course Offerings</div>
                </div>
            </div>
            <div class="nav-menu-item">
                <button class="nav-menu-button" data-target="classCalendarSubmenu">Class & Calendar</button>
                <div id="classCalendarSubmenu" class="submenu">
                    <div id="navRoutine" class="submenu-item">Routine</div>
                    <div id="navAttendance" class="submenu-item">Attendance Sheet</div>
                    <div id="navHolidays" class="submenu-item">Holidays & Events</div>
                    <div id="navAcademicCalendar" class="submenu-item">Academic Calendar</div>
                </div>
            </div>
            <div class="nav-menu-item">
                <button class="nav-menu-button" data-target="myToolsSubmenu">Tools</button>
                <div id="myToolsSubmenu" class="submenu">
                    <div id="navAddRemove" class="submenu-item">Add/Remove</div>
                    <div id="navDragDropRoutine" class="submenu-item">Routine Maker</div>
                    <div id="navCourseOutline" class="submenu-item">Course Outline Generator</div>
                </div>
            </div>
            <div class="nav-menu-item">
                <button class="nav-menu-button" id="logoutButton">Logout</button>
            </div>
        </nav>
        <div id="messageBoxOverlay" class="message-box-overlay"></div>
        <div id="messageBox" class="message-box">
            <p id="messageBoxText" class="text-lg mb-4"></p>
            <button id="messageBoxClose" class="btn-primary">OK</button>
        </div>
        <div id="loadingIndicator" class="hidden fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-[1001]">
            <div class="bg-white p-6 rounded-lg shadow-lg flex items-center space-x-3">
                <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-red-500"></div>
                <p class="text-lg text-gray-700">Loading data...</p>
            </div>
        </div>
        <section id="homeSection" class="content-section">
            <h2 class="text-3xl font-bold text-red-700 mb-6">Home</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="card p-6">
                    <h3 class="text-2xl font-semibold text-gray-800 mb-4">Events and Agendas</h3>
                    <div id="eventsAgendasList" class="space-y-2">
                        <p class="text-gray-500">No events scheduled for today.</p>
                    </div>
                </div>
                <div class="card p-6">
                    <h3 class="text-2xl font-semibold text-gray-800 mb-4">Upcoming Events</h3>
                    <div id="upcomingEventsList" class="space-y-2">
                        <p class="text-gray-500">No upcoming events.</p>
                    </div>
                </div>
            </div>
        </section>
        <section id="addRemoveSection" class="content-section hidden">
            <h2 class="text-3xl font-bold text-red-700 mb-6">Add/Remove Data</h2>
            <div class="card p-6">
                <div class="tab-buttons">
                    <button class="tab-button active" data-tab="coursesOfferings">Courses & Offerings</button>
                    <button class="tab-button" data-tab="people">People (Students & Faculty)</button>
                    <button class="tab-button" data-tab="calendarEvents">Calendar Events (Routine, Holidays, Agendas)</button>
                </div>
                <div id="coursesOfferingsTab" class="tab-content active">
                    <h3 class="text-2xl font-semibold text-gray-800 mb-4" id="courseFormTitle">Add New Course to Curriculum</h3>
                    <form id="addCourseForm" class="space-y-4 mb-8">
                        <div>
                            <label for="courseName" class="block text-gray-700 text-sm font-bold mb-2">Course Name:</label>
                            <input type="text" id="courseName" name="courseName" required class="focus:ring-red-500 focus:border-red-500">
                        </div>
                        <div>
                            <label for="courseCode" class="block text-gray-700 text-sm font-bold mb-2">Course Code:</label>
                            <input type="text" id="courseCode" name="courseCode" required class="focus:ring-red-500 focus:border-red-500">
                        </div>
                        <div>
                            <label for="courseCredit" class="block text-gray-700 text-sm font-bold mb-2">Credit:</label>
                            <input type="number" id="courseCredit" name="courseCredit" step="0.5" min="0" required class="focus:ring-red-500 focus:border-red-500">
                        </div>
                        <div>
                            <label for="courseSemester" class="block text-gray-700 text-sm font-bold mb-2">Default Semester (e.g., 1st Semester):</label>
                            <input type="text" id="courseSemester" name="courseSemester" placeholder="e.g., Spring 2025" required class="focus:ring-red-500 focus:border-red-500">
                        </div>
                        <div>
                            <label for="courseFaculty" class="block text-gray-700 text-sm font-bold mb-2">Default Faculty (Teacher):</label>
                            <select id="courseFaculty" name="courseFaculty" class="focus:ring-red-500 focus:border-red-500" required>
                                <option value="">-- Select Faculty --</option>
                            </select>
                        </div>
                        <div>
                            <label for="courseType" class="block text-gray-700 text-sm font-bold mb-2">Course Type:</label>
                            <select id="courseType" name="courseType" class="focus:ring-red-500 focus:border-red-500" required>
                                <option value="">-- Select Type --</option>
                                <option value="Core Course">Core Course</option>
                                <option value="GED">GED</option>
                                <option value="Elective">Elective</option>
                                <option value="Thesis">Thesis</option>
                                <option value="Optional General Education">Optional General Education</option>
                            </select>
                        </div>
                        <div>
                            <label for="curriculumType" class="block text-gray-700 text-sm font-bold mb-2">Curriculum Type:</label>
                            <select id="curriculumType" name="curriculumType" class="focus:ring-red-500 focus:border-red-500" required>
                                <option value="">-- Select Curriculum --</option>
                                <option value="BA (Non-OBE)">BA (Non-OBE)</option>
                                <option value="BA (OBE)">BA (OBE)</option>
                                <option value="MA (Non-OBE)">MA (Non-OBE)</option>
                                <option value="MA (OBE)">MA (OBE)</option>
                                <option value="TESOL (OBE)">TESOL (OBE)</option>
                            </select>
                        </div>
                        <div>
                            <label for="offeredToSemester" class="block text-gray-700 text-sm font-bold mb-2">Offered to (Target Semester for Curriculum):</label>
                            <select id="offeredToSemester" name="offeredToSemester" class="focus:ring-red-500 focus:border-red-500" required>
                                <option value="">-- Select Semester --</option>
                                <option value="1st Semester">1st Semester</option>
                                <option value="2nd Semester">2nd Semester</option>
                                <option value="3rd Semester">3rd Semester</option>
                                <option value="4th Semester">4th Semester</option>
                                <option value="5th Semester">5th Semester</option>
                                <option value="6th Semester">6th Semester</option>
                                <option value="7th Semester">7th Semester</option>
                                <option value="8th Semester">8th Semester</option>
                                <option value="Foundation Semester">Foundation Semester</option>
                                <option value="Flexible">Flexible</option>
                                <option value="Final Semester">Final Semester</option>
                            </select>
                        </div>
                        <div>
                            <label for="courseTiming" class="block text-gray-700 text-sm font-bold mb-2">Default Class Timing (e.g., Mon/Wed 10:00-11:30 AM):</label>
                            <input type="text" id="courseTiming" name="courseTiming" required class="focus:ring-red-500 focus:border-red-500">
                        </div>
                        <div>
                            <label for="courseRoom" class="block text-gray-700 text-sm font-bold mb-2">Default Room Number:</label>
                            <input type="text" id="courseRoom" name="courseRoom" required class="focus:ring-red-500 focus:border-red-500">
                        </div>
                        <button type="submit" id="addUpdateCourseBtn" class="btn-primary w-full">Add Course to Curriculum</button>
                        <button type="button" id="cancelCourseEditBtn" class="btn-secondary w-full hidden">Cancel Edit</button>
                    </form>
                    <h3 class="text-2xl font-semibold text-gray-800 mb-4">Existing Courses (in Curriculum)</h3>
                    <div id="coursesList" class="overflow-x-auto mb-8">
                        <p class="text-gray-500 text-center">No courses added yet.</p>
                    </div>
                    <div class="flex flex-wrap gap-2 mt-6">
                        <button onclick="printSection('coursesList', 'Courses List')" class="btn-secondary">Print Courses</button>
                        <button onclick="downloadPdf('coursesList', 'Courses List')" class="btn-primary">Download PDF</button>
                    </div>
                    <hr class="my-8">
                    <h3 class="text-2xl font-semibold text-gray-800 mb-4" id="courseOfferingFormTitle">Add Course Offering for Semester</h3>
                    <form id="addCourseOfferingForm" class="space-y-4 mb-8">
                        <div>
                            <label for="offeringSemester" class="block text-gray-700 text-sm font-bold mb-2">Semester for Offering (e.g., Spring 2025):</label>
                            <input type="text" id="offeringSemester" name="offeringSemester" placeholder="e.g., Spring 2025" required class="focus:ring-red-500 focus:border-red-500">
                        </div>
                        <div>
                            <label class="block text-gray-700 text-sm font-bold mb-2">Select Courses from Curriculum for this Offering:</label>
                            <div id="availableCoursesForOffering" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2 max-h-60 overflow-y-auto border p-4 rounded-md">
                                <p class="text-gray-500">No courses available. Add courses to curriculum first.</p>
                            </div>
                        </div>
                        <button type="submit" id="addUpdateOfferingBtn" class="btn-primary w-full">Add Course Offering</button>
                        <button type="button" id="cancelOfferingEditBtn" class="btn-secondary w-full hidden">Cancel Edit</button>
                    </form>
                    <h3 class="text-2xl font-semibold text-gray-800 mb-4">Existing Course Offerings</h3>
                    <div id="courseOfferingsList" class="overflow-x-auto">
                        <p class="text-gray-500 text-center">No course offerings added yet.</p>
                    </div>
                    <div class="flex flex-wrap gap-2 mt-6">
                        <button onclick="printSection('courseOfferingsList', 'Course Offerings List')" class="btn-secondary">Print Course Offerings</button>
                        <button onclick="downloadPdf('courseOfferingsList', 'Course Offerings List')" class="btn-primary">Download PDF</button>
                    </div>
                </div>
                <div id="peopleTab" class="tab-content">
                    <h3 class="text-2xl font-semibold text-gray-800 mb-4" id="studentFormTitle">Add New Student</h3>
                    <form id="addStudentForm" class="space-y-4 mb-8">
                        <div>
                            <label for="studentName" class="block text-gray-700 text-sm font-bold mb-2">Student Name:</label>
                            <input type="text" id="studentName" name="studentName" required class="focus:ring-red-500 focus:border-red-500">
                        </div>
                        <div>
                            <label for="studentId" class="block text-gray-700 text-sm font-bold mb-2">Student ID:</label>
                            <input type="text" id="studentId" name="studentId" required class="focus:ring-red-500 focus:border-red-500">
                        </div>
                        <div>
                            <label for="studentAddress" class="block text-gray-700 text-sm font-bold mb-2">Address:</label>
                            <textarea id="studentAddress" name="studentAddress" rows="3" required class="focus:ring-red-500 focus:border-red-500"></textarea>
                        </div>
                        <button type="submit" id="addUpdateStudentBtn" class="btn-primary w-full">Add Student</button>
                        <button type="button" id="cancelStudentEditBtn" class="btn-secondary w-full hidden">Cancel Edit</button>
                    </form>
                    <h3 class="text-2xl font-semibold text-gray-800 mb-4">Registered Students</h3>
                    <div id="studentsList" class="overflow-x-auto mb-8">
                        <p class="text-gray-500 text-center">No students added yet.</p>
                    </div>
                    <div class="flex flex-wrap gap-2 mt-6">
                        <button onclick="printSection('studentsList', 'Students List')" class="btn-secondary">Print Students</button>
                        <button onclick="downloadPdf('studentsList', 'Students List')" class="btn-primary">Download PDF</button>
                    </div>
                    <hr class="my-8">
                    <h3 class="text-2xl font-semibold text-gray-800 mb-4" id="teacherFormTitle">Add New Faculty</h3>
                    <form id="addTeacherForm" class="space-y-4 mb-8">
                        <div>
                            <label for="teacherName" class="block text-gray-700 text-sm font-bold mb-2">Faculty Name:</label>
                            <input type="text" id="teacherName" name="teacherName" required class="focus:ring-red-500 focus:border-red-500">
                        </div>
                        <div>
                            <label for="teacherInitials" class="block text-gray-700 text-sm font-bold mb-2">Initials:</label>
                            <input type="text" id="teacherInitials" name="teacherInitials" required class="focus:ring-red-500 focus:border-red-500">
                        </div>
                        <div>
                            <label for="teacherType" class="block text-gray-700 text-sm font-bold mb-2">Faculty Type:</label>
                            <select id="teacherType" name="teacherType" class="focus:ring-red-500 focus:border-red-500" required>
                                <option value="">-- Select Type --</option>
                                <option value="Regular">Regular</option>
                                <option value="Adjunct">Adjunct</option>
                            </select>
                        </div>
                        <button type="submit" id="addUpdateTeacherBtn" class="btn-primary w-full">Add Faculty</button>
                        <button type="button" id="cancelTeacherEditBtn" class="btn-secondary w-full hidden">Cancel Edit</button>
                    </form>
                    <h3 class="text-2xl font-semibold text-gray-800 mb-4">Existing Faculty</h3>
                    <div id="teachersList" class="overflow-x-auto">
                        <p class="text-gray-500 text-center">No faculty added yet.</p>
                    </div>
                    <div class="flex flex-wrap gap-2 mt-6">
                        <button onclick="printSection('teachersList', 'Faculty List')" class="btn-secondary">Print Faculty</button>
                        <button onclick="downloadPdf('teachersList', 'Faculty List')" class="btn-primary">Download PDF</button>
                    </div>
                </div>
                <div id="calendarEventsTab" class="tab-content">
                    <h3 class="text-2xl font-semibold text-gray-800 mb-4" id="routineFormTitle">Add Routine Entry</h3>
                    <form id="addRoutineForm" class="space-y-4 mb-8">
                        <div>
                            <label for="routineCourse" class="block text-gray-700 text-sm font-bold mb-2">Course:</label>
                            <select id="routineCourse" name="routineCourse" class="focus:ring-red-500 focus:border-red-500" required>
                                <option value="">-- Select Course --</option>
                            </select>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div>
                                <label for="routineDay" class="block text-gray-700 text-sm font-bold mb-2">Day:</label>
                                <select id="routineDay" name="routineDay" class="focus:ring-red-500 focus:border-red-500" required>
                                    <option value="">-- Select Day --</option>
                                    <option value="Sunday">Sunday</option>
                                    <option value="Monday">Monday</option>
                                    <option value="Tuesday">Tuesday</option>
                                    <option value="Wednesday">Wednesday</option>
                                    <option value="Thursday">Thursday</option>
                                    <option value="Friday">Friday</option>
                                    <option value="Saturday">Saturday</option>
                                </select>
                            </div>
                            <div>
                                <label for="routineStartTime" class="block text-gray-700 text-sm font-bold mb-2">Start Time:</label>
                                <input type="time" id="routineStartTime" name="routineStartTime" required class="focus:ring-red-500 focus:border-red-500">
                            </div>
                            <div>
                                <label for="routineEndTime" class="block text-gray-700 text-sm font-bold mb-2">End Time:</label>
                                <input type="time" id="routineEndTime" name="routineEndTime" required class="focus:ring-red-500 focus:border-red-500">
                            </div>
                        </div>
                        <div>
                            <label for="routineRoom" class="block text-gray-700 text-sm font-bold mb-2">Room Number:</label>
                            <input type="text" id="routineRoom" name="routineRoom" required class="focus:ring-red-500 focus:border-red-500">
                        </div>
                        <button type="submit" id="addUpdateRoutineBtn" class="btn-primary w-full">Add Routine Entry</button>
                        <button type="button" id="cancelRoutineEditBtn" class="btn-secondary w-full hidden">Cancel Edit</button>
                    </form>
                    <h3 class="text-2xl font-semibold text-gray-800 mb-4">Current Routine</h3>
                    <div id="routineList" class="overflow-x-auto mb-8">
                        <p class="text-gray-500 text-center">No routine entries added yet.</p>
                    </div>
                    <div class="flex flex-wrap gap-2 mt-6">
                        <button onclick="printSection('routineList', 'Routine List')" class="btn-secondary">Print Routine</button>
                        <button onclick="downloadPdf('routineList', 'Routine List')" class="btn-primary">Download PDF</button>
                    </div>
                    <hr class="my-8">
                    <h3 class="text-2xl font-semibold text-gray-800 mb-4" id="holidayFormTitle">Add New Event</h3>
                    <form id="addHolidayForm" class="space-y-4 mb-8">
                        <div>
                            <label for="eventType" class="block text-gray-700 text-sm font-bold mb-2">Event Type:</label>
                            <select id="eventType" name="eventType" class="focus:ring-red-500 focus:border-red-500" required>
                                <option value="">-- Select Type --</option>
                                <option value="National Holiday">National Holiday</option>
                                <option value="University Closure">University Closure</option>
                                <option value="Teacher Absence">Teacher Absence</option>
                                <option value="Sick Leave">Sick Leave</option>
                                <option value="Make-up Class">Make-up Class</option>
                                <option value="Agenda">Agenda</option>
                                <option value="Reminder">Reminder</option>
                                <option value="ToDo">To-Do Item</option>
                            </select>
                        </div>
                        <div>
                            <label for="eventTitle" class="block text-gray-700 text-sm font-bold mb-2">Event Title:</label>
                            <input type="text" id="eventTitle" name="eventTitle" required class="focus:ring-red-500 focus:border-red-500">
                        </div>
                        <div>
                            <label for="eventDate" class="block text-gray-700 text-sm font-bold mb-2">Date:</label>
                            <input type="date" id="eventDate" name="eventDate" required class="focus:ring-red-500 focus:border-red-500">
                        </div>
                        <div>
                            <label for="eventDescription" class="block text-gray-700 text-sm font-bold mb-2">Description (Optional):</label>
                            <textarea id="eventDescription" name="eventDescription" rows="2" class="focus:ring-red-500 focus:border-red-500"></textarea>
                        </div>
                        <button type="submit" id="addUpdateHolidayBtn" class="btn-primary w-full">Add Event</button>
                        <button type="button" id="cancelHolidayEditBtn" class="btn-secondary w-full hidden">Cancel Edit</button>
                    </form>
                    <h3 class="text-2xl font-semibold text-gray-800 mb-4">Academic Calendar Events</h3>
                    <div id="holidaysList" class="overflow-x-auto">
                        <p class="text-gray-500 text-center">No events added yet.</p>
                    </div>
                    <div class="flex flex-wrap gap-2 mt-6">
                        <button onclick="printSection('holidaysList', 'Academic Calendar Events')" class="btn-secondary">Print Events</button>
                        <button onclick="downloadPdf('holidaysList', 'Academic Calendar Events')" class="btn-primary">Download PDF</button>
                    </div>
                </div>
            </div>
        </section>
        <section id="curriculaSection" class="content-section hidden">
            <h2 class="text-3xl font-bold text-red-700 mb-6">Curricula</h2>
            <div id="displayCurriculaList" class="overflow-x-auto card p-6">
                <p class="text-gray-500 text-center">No curricula to display.</p>
            </div>
            <div class="flex flex-wrap gap-2 mt-6">
                <button onclick="printSection('displayCurriculaList', 'Curricula Display')" class="btn-secondary">Print Displayed Curricula</button>
                <button onclick="downloadPdf('displayCurriculaList', 'Curricula Display')" class="btn-primary">Download PDF</button>
            </div>
        </section>
        <section id="studentsSection" class="content-section hidden">
            <h2 class="text-3xl font-bold text-red-700 mb-6">Students</h2>
            <div id="displayStudentsList" class="overflow-x-auto card p-6">
                <p class="text-gray-500 text-center">No students to display.</p>
            </div>
            <div class="flex flex-wrap gap-2 mt-6">
                <button onclick="printSection('displayStudentsList', 'Students Display')" class="btn-secondary">Print Displayed Students</button>
                <button onclick="downloadPdf('displayStudentsList', 'Students Display')" class="btn-primary">Download PDF</button>
            </div>
        </section>
        <section id="facultySection" class="content-section hidden">
            <h2 class="text-3xl font-bold text-red-700 mb-6">Faculty</h2>
            <div id="displayFacultyList" class="overflow-x-auto card p-6">
                <p class="text-gray-500 text-center">No faculty to display.</p>
            </div>
            <div class="flex flex-wrap gap-2 mt-6">
                <button onclick="printSection('displayFacultyList', 'Faculty Display')" class="btn-secondary">Print Displayed Faculty</button>
                <button onclick="downloadPdf('displayFacultyList', 'Faculty Display')" class="btn-primary">Download PDF</button>
            </div>
        </section>
        <section id="courseOfferingsSection" class="content-section hidden">
            <h2 class="text-3xl font-bold text-red-700 mb-6">Course Offerings</h2>
            <div id="displayCourseOfferingsList" class="overflow-x-auto card p-6">
                <p class="text-gray-500 text-center">No course offerings to display.</p>
            </div>
            <div class="flex flex-wrap gap-2 mt-6">
                <button onclick="printSection('displayCourseOfferingsList', 'Course Offerings Display')" class="btn-secondary">Print Displayed Course Offerings</button>
                <button onclick="downloadPdf('displayCourseOfferingsList', 'Course Offerings Display')" class="btn-primary">Download PDF</button>
            </div>
        </section>
        <section id="routineSection" class="content-section hidden">
            <h2 class="text-3xl font-bold text-red-700 mb-6">Class Routine</h2>
            <div id="displayRoutineList" class="overflow-x-auto card p-6">
                <p class="text-gray-500 text-center">No routine entries to display.</p>
            </div>
            <div class="flex flex-wrap gap-2 mt-6">
                <button onclick="printSection('displayRoutineList', 'Class Routine Display')" class="btn-secondary">Print Displayed Routine</button>
                <button onclick="downloadPdf('displayRoutineList', 'Class Routine Display')" class="btn-primary">Download PDF</button>
            </div>
        </section>
        <section id="attendanceSection" class="content-section hidden">
            <h2 class="text-3xl font-bold text-red-700 mb-6">Attendance Sheet</h2>
            <div class="card p-6 mb-6">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                    <div>
                        <label for="attendanceCourseSelect" class="block text-gray-700 text-sm font-bold mb-2">Select Course:</label>
                        <select id="attendanceCourseSelect" class="focus:ring-red-500 focus:border-red-500">
                            <option value="">-- Select Course --</option>
                        </select>
                    </div>
                    <div>
                        <label for="attendanceDate" class="block text-gray-700 text-sm font-bold mb-2">Date:</label>
                        <input type="date" id="attendanceDate" class="focus:ring-red-500 focus:border-red-500">
                    </div>
                </div>
                <button id="loadAttendanceBtn" class="btn-primary w-full">Load Attendance Sheet</button>
            </div>
            <div id="attendanceSheetDisplay" class="card p-6 hidden">
                <h3 class="text-2xl font-semibold text-gray-800 mb-4">Attendance for <span id="attendanceCourseTitle"></span> on <span id="attendanceDateDisplay"></span></h3>
                <div id="attendanceTableContainer" class="overflow-x-auto mb-4">
                    <p class="text-gray-500 text-center">Select a course and date to load attendance.</p>
                </div>
                <div class="flex flex-wrap gap-2 mt-6">
                    <button id="saveAttendanceBtn" class="btn-primary">Save Attendance</button>
                    <button onclick="printSection('attendanceSheetDisplay', 'Attendance Sheet')" class="btn-secondary">Print Attendance Sheet</button>
                    <button onclick="downloadPdf('attendanceSheetDisplay', 'Attendance Sheet')" class="btn-primary">Download PDF</button>
                </div>
            </div>
        </section>
        <section id="holidaysSection" class="content-section hidden">
            <h2 class="text-3xl font-bold text-red-700 mb-6">Holidays & Events</h2>
            <div id="displayHolidaysList" class="overflow-x-auto card p-6">
                <p class="text-gray-500 text-center">No holidays or events to display.</p>
            </div>
            <div class="flex flex-wrap gap-2 mt-6">
                <button onclick="printSection('displayHolidaysList', 'Holidays and Events Display')" class="btn-secondary">Print Displayed Events</button>
                <button onclick="downloadPdf('displayHolidaysList', 'Holidays and Events Display')" class="btn-primary">Download PDF</button>
            </div>
        </section>
        <section id="academicCalendarSection" class="content-section hidden">
            <h2 class="text-3xl font-bold text-red-700 mb-6">Academic Calendar</h2>
            <div id="academicCalendarDisplay" class="card p-6">
                <p class="text-gray-500 text-center">Academic calendar content will be displayed here.</p>
            </div>
            <div class="flex flex-wrap gap-2 mt-6">
                <button onclick="printSection('academicCalendarDisplay', 'Academic Calendar')" class="btn-secondary">Print Academic Calendar</button>
                <button onclick="downloadPdf('academicCalendarDisplay', 'Academic Calendar')" class="btn-primary">Download PDF</button>
            </div>
        </section>
        <section id="dragDropRoutineSection" class="content-section hidden">
            <h2 class="text-3xl font-bold text-red-700 mb-6">Routine Maker (Drag & Drop)</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div class="card p-6 md:col-span-1">
                    <h3 class="text-2xl font-semibold text-gray-800 mb-4">Available Courses</h3>
                    <div id="dragCoursesList" class="max-h-96 overflow-y-auto border p-4 rounded-md bg-gray-50">
                        <p class="text-gray-500">No courses available for drag & drop. Add courses first.</p>
                    </div>
                </div>
                <div class="card p-6 md:col-span-2">
                    <h3 class="text-2xl font-semibold text-gray-800 mb-4">Drag & Drop Routine Grid</h3>
                    <div class="routine-grid-container">
                        <table id="dragDropRoutineGrid" class="routine-grid">
                            <thead>
                                <tr>
                                    <th>Time/Day</th>
                                    <th>Sunday</th>
                                    <th>Monday</th>
                                    <th>Tuesday</th>
                                    <th>Wednesday</th>
                                    <th>Thursday</th>
                                    <th>Friday</th>
                                    <th>Saturday</th>
                                </tr>
                            </thead>
                            <tbody>
                                </tbody>
                        </table>
                    </div>
                    <div class="flex flex-wrap gap-2 mt-6">
                        <button id="saveRoutineGridBtn" class="btn-primary">Save Routine</button>
                        <button onclick="printSection('dragDropRoutineGrid', 'Drag & Drop Routine Grid')" class="btn-secondary">Print Routine Grid</button>
                        <button onclick="downloadPdf('dragDropRoutineGrid', 'Drag & Drop Routine Grid')" class="btn-primary">Download PDF</button>
                    </div>
                    <div id="clashReport" class="clash-report hidden">
                        <h3>Clash Report</h3>
                        <ul id="clashReportList"></ul>
                    </div>
                </div>
            </div>
        </section>
        <section id="courseOutlineSection" class="content-section hidden">
            <h2 class="text-3xl font-bold text-red-700 mb-6">Course Outline Generator</h2>
            <div class="card p-6">
                <form id="courseOutlineForm" class="space-y-4 mb-8">
                    <h3 class="text-2xl font-semibold text-gray-800 mb-4">Course Information</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label for="outlineCourseName" class="block text-gray-700 text-sm font-bold mb-2">Course Name:</label>
                            <input type="text" id="outlineCourseName" name="outlineCourseName" required class="focus:ring-red-500 focus:border-red-500">
                        </div>
                        <div>
                            <label for="outlineCourseCode" class="block text-gray-700 text-sm font-bold mb-2">Course Code:</label>
                            <input type="text" id="outlineCourseCode" name="outlineCourseCode" required class="focus:ring-red-500 focus:border-red-500">
                        </div>
                        <div>
                            <label for="outlineCreditHours" class="block text-gray-700 text-sm font-bold mb-2">Credit Hours:</label>
                            <input type="number" id="outlineCreditHours" name="outlineCreditHours" step="0.5" min="0" required class="focus:ring-red-500 focus:border-red-500">
                        </div>
                        <div>
                            <label for="outlineSemester" class="block text-gray-700 text-sm font-bold mb-2">Semester:</label>
                            <input type="text" id="outlineSemester" name="outlineSemester" placeholder="e.g., Spring 2025" required class="focus:ring-red-500 focus:border-red-500">
                        </div>
                        <div>
                            <label for="outlineFacultyName" class="block text-gray-700 text-sm font-bold mb-2">Faculty Name:</label>
                            <input type="text" id="outlineFacultyName" name="outlineFacultyName" required class="focus:ring-red-500 focus:border-red-500">
                        </div>
                        <div>
                            <label for="outlineRoom" class="block text-gray-700 text-sm font-bold mb-2">Room Number:</label>
                            <input type="text" id="outlineRoom" name="outlineRoom" class="focus:ring-red-500 focus:border-red-500">
                        </div>
                        <div>
                            <label for="outlineTiming" class="block text-gray-700 text-sm font-bold mb-2">Class Timing (e.g., Mon/Wed 10:00-11:30 AM):</label>
                            <input type="text" id="outlineTiming" name="outlineTiming" class="focus:ring-red-500 focus:border-red-500">
                        </div>
                    </div>
                    <h3 class="text-2xl font-semibold text-gray-800 mb-4 mt-6">Course Description & Objectives</h3>
                    <div>
                        <label for="outlineDescription" class="block text-gray-700 text-sm font-bold mb-2">Course Description:</label>
                        <textarea id="outlineDescription" name="outlineDescription" rows="4" class="focus:ring-red-500 focus:border-red-500" required></textarea>
                    </div>
                    <div>
                        <label for="outlineObjectives" class="block text-gray-700 text-sm font-bold mb-2">Course Objectives:</label>
                        <textarea id="outlineObjectives" name="outlineObjectives" rows="4" class="focus:ring-red-500 focus:border-red-500" required></textarea>
                    </div>
                    <h3 class="text-2xl font-semibold text-gray-800 mb-4 mt-6">Learning Outcomes</h3>
                    <div id="learningOutcomesContainer" class="space-y-2">
                        <div class="flex items-center space-x-2">
                            <input type="text" name="learningOutcome" placeholder="e.g., Analyze literary texts critically" class="flex-grow focus:ring-red-500 focus:border-red-500">
                            <button type="button" class="btn-secondary px-3 py-1 text-sm remove-item-btn" onclick="this.parentNode.remove()">Remove</button>
                        </div>
                    </div>
                    <button type="button" id="addLearningOutcomeBtn" class="btn-secondary px-4 py-2 text-sm mt-2">Add Learning Outcome</button>
                    <h3 class="text-2xl font-semibold text-gray-800 mb-4 mt-6">Weekly Schedule / Topics</h3>
                    <div id="weeklyScheduleContainer" class="space-y-4">
                        <div class="border p-4 rounded-md space-y-2">
                            <label class="block text-gray-700 text-sm font-bold mb-2">Week 1:</label>
                            <input type="text" name="weeklyTopic" placeholder="Topic for Week 1" class="focus:ring-red-500 focus:border-red-500">
                            <input type="text" name="weeklyReading" placeholder="Readings for Week 1 (Optional)" class="focus:ring-red-500 focus:border-red-500">
                            <button type="button" class="btn-secondary px-3 py-1 text-sm remove-item-btn" onclick="this.parentNode.remove()">Remove Week</button>
                        </div>
                    </div>
                    <button type="button" id="addWeeklyScheduleBtn" class="btn-secondary px-4 py-2 text-sm mt-2">Add Week</button>
                    <h3 class="text-2xl font-semibold text-gray-800 mb-4 mt-6">Assessment Methods</h3>
                    <div id="assessmentMethodsContainer" class="space-y-2">
                        <div class="grid grid-cols-3 gap-2 items-center">
                            <input type="text" name="assessmentType" placeholder="e.g., Midterm Exam" class="focus:ring-red-500 focus:border-red-500">
                            <input type="number" name="assessmentPercentage" placeholder="Percentage (%)" min="0" max="100" class="focus:ring-red-500 focus:border-red-500">
                            <button type="button" class="btn-secondary px-3 py-1 text-sm remove-item-btn" onclick="this.parentNode.remove()">Remove</button>
                        </div>
                    </div>
                    <button type="button" id="addAssessmentMethodBtn" class="btn-secondary px-4 py-2 text-sm mt-2">Add Assessment Method</button>
                    <h3 class="text-2xl font-semibold text-gray-800 mb-4 mt-6">Required Readings / Textbooks</h3>
                    <div id="requiredReadingsContainer" class="space-y-2">
                        <div class="flex items-center space-x-2">
                            <input type="text" name="requiredReading" placeholder="e.g., Author, Title, Year" class="flex-grow focus:ring-red-500 focus:border-red-500">
                            <button type="button" class="btn-secondary px-3 py-1 text-sm remove-item-btn" onclick="this.parentNode.remove()">Remove</button>
                        </div>
                    </div>
                    <button type="button" id="addRequiredReadingBtn" class="btn-secondary px-4 py-2 text-sm mt-2">Add Reading</button>
                    <h3 class="text-2xl font-semibold text-gray-800 mb-4 mt-6">Policies</h3>
                    <div>
                        <label for="gradingPolicy" class="block text-gray-700 text-sm font-bold mb-2">Grading Policy:</label>
                        <textarea id="gradingPolicy" name="gradingPolicy" rows="3" class="focus:ring-red-500 focus:border-red-500"></textarea>
                    </div>
                    <div>
                        <label for="attendancePolicy" class="block text-gray-700 text-sm font-bold mb-2">Attendance Policy:</label>
                        <textarea id="attendancePolicy" name="attendancePolicy" rows="3" class="focus:ring-red-500 focus:border-red-500"></textarea>
                    </div>
                    <div>
                        <label for="academicIntegrity" class="block text-gray-700 text-sm font-bold mb-2">Academic Integrity Statement:</label>
                        <textarea id="academicIntegrity" name="academicIntegrity" rows="3" class="focus:ring-red-500 focus:border-red-500"></textarea>
                    </div>
                    <button type="submit" class="btn-primary w-full mt-6">Generate Course Outline</button>
                </form>
                <hr class="my-8">
                <h3 class="text-2xl font-semibold text-gray-800 mb-4">Generated Course Outline Preview</h3>
                <div id="generatedOutlinePreview" class="card p-6 border border-gray-200 min-h-[200px] overflow-auto">
                    <p class="text-gray-500 text-center">Your generated course outline will appear here.</p>
                </div>
                <div class="flex flex-wrap gap-2 mt-6">
                    <button onclick="printSection('generatedOutlinePreview', 'Course Outline')" class="btn-secondary">Print Outline</button>
                    <button onclick="downloadPdf('generatedOutlinePreview', 'Course Outline')" class="btn-primary">Download PDF</button>
                </div>
            </div>
        </section>
    </div>
    <script>
        let courses = JSON.parse(localStorage.getItem('courses')) || [];
        let students = JSON.parse(localStorage.getItem('students')) || [];
        let teachers = JSON.parse(localStorage.getItem('teachers')) || [];
        let courseOfferings = JSON.parse(localStorage.getItem('courseOfferings')) || [];
        let routineEntries = JSON.parse(localStorage.getItem('routineEntries')) || [];
        let holidaysEvents = JSON.parse(localStorage.getItem('holidaysEvents')) || [];
        let attendanceRecords = JSON.parse(localStorage.getItem('attendanceRecords')) || {};
        let isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
        function showMessageBox(message){document.getElementById('messageBoxText').textContent=message;document.getElementById('messageBoxOverlay').style.display='block';document.getElementById('messageBox').style.display='block';}
        function hideMessageBox(){document.getElementById('messageBoxOverlay').style.display='none';document.getElementById('messageBox').style.display='none';}
        function showLoading(){document.getElementById('loadingIndicator').classList.remove('hidden');}
        function hideLoading(){document.getElementById('loadingIndicator').classList.add('hidden');}
        function loadScript(url,id){return new Promise((resolve,reject)=>{if(document.getElementById(id)){resolve();return;}
        const script=document.createElement('script');script.src=url;script.id=id;script.onload=()=>resolve();script.onerror=()=>reject(new Error(`Failed to load script: ${url}`));document.body.appendChild(script);});}
        function printSection(sectionId,reportTitle){const sectionToPrint=document.getElementById(sectionId);if(!sectionToPrint){showMessageBox('Error: Section not found for printing.');return;}
        const printWindow=window.open('','_blank');printWindow.document.write(`
                <!DOCTYPE html>
                <html lang="en">
                <head>
                    <meta charset="UTF-8">
                    <meta name="viewport" content="width=device-width, initial-scale=1.0">
                    <title>${reportTitle} - Central Women's University</title>
                    <style>
                        body {
                            font-family: 'Times New Roman', serif !important;
                            margin: 0;
                            padding: 0;
                            color: #000;
                            font-size: 10pt;
                        }
                        .print-page {
                            width: 210mm;
                            min-height: 297mm;
                            margin: 0 auto;
                            padding: 15mm;
                            box-sizing: border-box;
                            page-break-after: always;
                        }
                        .print-page:last-child {
                            page-break-after: auto;
                        }
                        table {
                            width: 100%;
                            border-collapse: collapse;
                            margin-top: 1rem;
                        }
                        th, td {
                            border: 1px solid #000;
                            padding: 8px;
                            text-align: left;
                            background-color: #fff !important;
                            color: #000 !important;
                        }
                        th {
                            font-weight: bold;
                            background-color: #f2f2f2 !important;
                        }
                        tr:nth-child(even) {
                            background-color: #f9f9f9 !important;
                        }
                        .routine-grid-container {
                            overflow-x: visible;
                            border: none;
                        }
                        .routine-grid {
                            min-width: unset;
                            width: 100%;
                        }
                        .routine-grid th, .routine-grid td {
                            height: auto;
                            vertical-align: middle;
                        }
                        .routine-item {
                            background-color: #e0e0e0 !important;
                            color: #000 !important;
                            border: 1px solid #ccc !important;
                            box-shadow: none !important;
                            margin-bottom: 2px;
                            padding: 2px 5px;
                            font-size: 8pt;
                        }
                        .outline-section-title {
                            font-size: 14pt;
                            font-weight: bold;
                            margin-top: 10pt;
                            margin-bottom: 5pt;
                            color: #333;
                        }
                        .outline-subsection-title {
                            font-size: 12pt;
                            font-weight: bold;
                            margin-top: 8pt;
                            margin-bottom: 4pt;
                            color: #555;
                        }
                        .outline-text {
                            font-size: 10pt;
                            line-height: 1.5;
                            margin-bottom: 5pt;
                        }
                        .outline-list {
                            list-style-type: disc;
                            margin-left: 20pt;
                            margin-bottom: 5pt;
                        }
                        .outline-list li {
                            margin-bottom: 3pt;
                        }
                        .outline-table {
                            width: 100%;
                            border-collapse: collapse;
                            margin-top: 5pt;
                            margin-bottom: 10pt;
                        }
                        .outline-table th, .outline-table td {
                            border: 1px solid #ccc;
                            padding: 5pt;
                            text-align: left;
                            font-size: 9pt;
                        }
                        .outline-table th {
                            background-color: #f0f0f0;
                        }
                        button, a.btn, input[type="checkbox"], select, form, .flex-wrap, .gap-2, .mt-6 {
                            display: none !important;
                        }
                    </style>
                </head>
                <body>
                    <div class="print-page">
                        <div class="print-content">
                            ${sectionToPrint.innerHTML}
                        </div>
                    </div>
                </body>
                </html>
            `);printWindow.document.close();printWindow.focus();printWindow.print();printWindow.close();}
        async function downloadPdf(sectionId,fileNamePrefix){showLoading();const element=document.getElementById(sectionId);if(!element){showMessageBox('Error: Section not found for PDF download.');hideLoading();return;}
        try{if(typeof jspdf==='undefined'||typeof html2canvas==='undefined'){showMessageBox('Loading PDF libraries...');await loadScript('https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js','jspdf-script');await loadScript('https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js','html2canvas-script');hideMessageBox();}
        const tempDiv=document.createElement('div');tempDiv.style.padding='20px';tempDiv.style.backgroundColor='white';tempDiv.style.fontFamily='Times New Roman, serif';tempDiv.style.color='#334155';tempDiv.style.width='fit-content';tempDiv.style.maxWidth='100%';tempDiv.innerHTML=`
                    <h1 style="font-size: 2rem; font-weight: bold; text-align: center; color: #b91c1c; margin-bottom: 0.5rem;">Central Women's University</h1>
                    <h2 style="font-size: 1.5rem; font-weight: bold; text-align: center; color: #dc2626; margin-bottom: 1.5rem;">Department of English Language and Literature</h2>
                    <h3 style="font-size: 1.25rem; font-weight: bold; color: #334155; margin-bottom: 1rem;">${fileNamePrefix}</h3>
                    ${element.innerHTML}
                `;document.body.appendChild(tempDiv);const canvas=await html2canvas(tempDiv,{scale:2,useCORS:true,logging:false});const imgData=canvas.toDataURL('image/png');const pdf=new jspdf.jsPDF('p','mm','a4');const imgWidth=210;const pageHeight=297;const imgHeight=canvas.height*imgWidth/canvas.width;let heightLeft=imgHeight;let position=0;pdf.addImage(imgData,'PNG',0,position,imgWidth,imgHeight);heightLeft-=pageHeight;while(heightLeft>=0){position=heightLeft-imgHeight;pdf.addPage();pdf.addImage(imgData,'PNG',0,position,imgWidth,imgHeight);heightLeft-=pageHeight;}
        pdf.save(`${fileNamePrefix.replace(/\s/g,'_')}_${new Date().toISOString().slice(0,10)}.pdf`);showMessageBox('PDF downloaded successfully!');}catch(error){console.error('Error generating PDF:',error);showMessageBox('Failed to generate PDF. Please try again.');}finally{document.body.removeChild(tempDiv);hideLoading();}}
        function saveData(key,data){localStorage.setItem(key,JSON.stringify(data));}
        const contentSections=document.querySelectorAll('.content-section');const navButtons=document.querySelectorAll('.nav-menu-button');const submenuItems=document.querySelectorAll('.submenu-item');const submenus=document.querySelectorAll('.submenu');const navHomeButton=document.getElementById('navHomeButton');
        function hideAllSections(){contentSections.forEach(section=>section.classList.add('hidden'));}
        function hideAllSubmenus(){submenus.forEach(submenu=>submenu.classList.remove('active'));}
        function deactivateAllNavButtons(){navButtons.forEach(btn=>btn.classList.remove('active'));submenuItems.forEach(item=>item.classList.remove('active'));}
        function showSection(sectionId,activeElement){hideAllSections();hideAllSubmenus();deactivateAllNavButtons();const targetSection=document.getElementById(sectionId);if(targetSection){targetSection.classList.remove('hidden');}
        if(activeElement){activeElement.classList.add('active');const parentSubmenu=activeElement.closest('.submenu');if(parentSubmenu){const parentButton=document.querySelector(`.nav-menu-button[data-target="${parentSubmenu.id}"]`);if(parentButton){parentButton.classList.add('active');}}}}
        navButtons.forEach(button=>{button.addEventListener('click',event=>{const targetSubmenuId=button.dataset.target;if(targetSubmenuId){const targetSubmenu=document.getElementById(targetSubmenuId);if(targetSubmenu){hideAllSubmenus();targetSubmenu.classList.toggle('active');deactivateAllNavButtons();button.classList.add('active');}}else if(button.id==='navHomeButton'){showSection('homeSection',button);}});});
        submenuItems.forEach(item=>{item.addEventListener('click',event=>{const sectionIdMap={'navCurricula':'curriculaSection','navStudents':'studentsSection','navFaculty':'facultySection','navCourseOfferings':'courseOfferingsSection','navRoutine':'routineSection','navAttendance':'attendanceSection','navHolidays':'holidaysSection','navAcademicCalendar':'academicCalendarSection','navAddRemove':'addRemoveSection','navDragDropRoutine':'dragDropRoutineSection','navCourseOutline':'courseOutlineSection'};const targetSectionId=sectionIdMap[item.id];if(targetSectionId){showSection(targetSectionId,item);if(item.id==='navCurricula')displayCurricula();if(item.id==='navStudents')displayStudents();if(item.id==='navFaculty')displayFaculty();if(item.id==='navCourseOfferings')displayCourseOfferings();if(item.id==='navRoutine')displayRoutine();if(item.id==='navAttendance')populateAttendanceCourseSelect();if(item.id==='navHolidays')displayHolidaysEvents();if(item.id==='navAddRemove'){populateCourseFacultySelect();populateRoutineCourseSelect();populateAvailableCoursesForOffering();displayCourses();displayCourseOfferings();displayStudents();displayTeachers();displayRoutine();displayHolidaysEvents();}
        if(item.id==='navDragDropRoutine'){renderDragDropRoutineGrid();populateDragCoursesList();}}});});
        document.addEventListener('click',event=>{if(!event.target.closest('.nav-menu-item')){hideAllSubmenus();}});
        document.querySelectorAll('.tab-button').forEach(button=>{button.addEventListener('click',()=>{const tabId=button.dataset.tab;document.querySelectorAll('.tab-button').forEach(btn=>btn.classList.remove('active'));document.querySelectorAll('.tab-content').forEach(content=>content.classList.remove('active'));button.classList.add('active');document.getElementById(tabId+'Tab').classList.add('active');});});
        const addCourseForm=document.getElementById('addCourseForm');const coursesListDiv=document.getElementById('coursesList');let editingCourseId=null;
        function displayCourses(){if(courses.length===0){coursesListDiv.innerHTML='<p class="text-gray-500 text-center">No courses added yet.</p>';return;}
        let tableHtml=`
                <table class="min-w-full bg-white rounded-lg shadow overflow-hidden">
                    <thead>
                        <tr>
                            <th class="py-3 px-4 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Code</th>
                            <th class="py-3 px-4 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Name</th>
                            <th class="py-3 px-4 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Credit</th>
                            <th class="py-3 px-4 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Semester</th>
                            <th class="py-3 px-4 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Faculty</th>
                            <th class="py-3 px-4 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Type</th>
                            <th class="py-3 px-4 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Curriculum</th>
                            <th class="py-3 px-4 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Offered To</th>
                            <th class="py-3 px-4 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Timing</th>
                            <th class="py-3 px-4 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Room</th>
                            <th class="py-3 px-4 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Actions</th>
                        </tr>
                    </thead>
                    <tbody>
            `;courses.forEach(course=>{const faculty=teachers.find(t=>t.id===course.facultyId);tableHtml+=`
                    <tr>
                        <td class="py-3 px-4 border-b border-gray-200">${course.code}</td>
                        <td class="py-3 px-4 border-b border-gray-200">${course.name}</td>
                        <td class="py-3 px-4 border-b border-gray-200">${course.credit||'N/A'}</td>
                        <td class="py-3 px-4 border-b border-gray-200">${course.semester}</td>
                        <td class="py-3 px-4 border-b border-gray-200">${faculty?faculty.name:'N/A'}</td>
                        <td class="py-3 px-4 border-b border-gray-200">${course.type}</td>
                        <td class="py-3 px-4 border-b border-gray-200">${course.curriculum}</td>
                        <td class="py-3 px-4 border-b border-gray-200">${course.offeredToSemester}</td>
                        <td class="py-3 px-4 border-b border-gray-200">${course.timing}</td>
                        <td class="py-3 px-4 border-b border-gray-200">${course.room}</td>
                        <td class="py-3 px-4 border-b border-gray-200">
                            <button onclick="editCourse('${course.id}')" class="text-blue-600 hover:text-blue-900 text-sm mr-2">Edit</button>
                            <button onclick="deleteCourse('${course.id}')" class="text-red-600 hover:text-red-900 text-sm">Delete</button>
                        </td>
                    </tr>
                `;});tableHtml+=`</tbody></table>`;coursesListDiv.innerHTML=tableHtml;}
        function populateCourseFacultySelect(){const select=document.getElementById('courseFaculty');select.innerHTML='<option value="">-- Select Faculty --</option>';teachers.forEach(teacher=>{const option=document.createElement('option');option.value=teacher.id;option.textContent=teacher.name;select.appendChild(option);});}
        addCourseForm.addEventListener('submit',event=>{event.preventDefault();const formData=new FormData(addCourseForm);const newCourse={id:editingCourseId||Date.now().toString(),name:formData.get('courseName'),code:formData.get('courseCode'),credit:parseFloat(formData.get('courseCredit')),semester:formData.get('courseSemester'),facultyId:formData.get('courseFaculty'),type:formData.get('courseType'),curriculum:formData.get('curriculumType'),offeredToSemester:formData.get('offeredToSemester'),timing:formData.get('courseTiming'),room:formData.get('courseRoom')};if(editingCourseId){courses=courses.map(course=>course.id===editingCourseId?newCourse:course);showMessageBox('Course updated successfully!');}else{courses.push(newCourse);showMessageBox('Course added successfully!');}
        saveData('courses',courses);addCourseForm.reset();editingCourseId=null;document.getElementById('addUpdateCourseBtn').textContent='Add Course to Curriculum';document.getElementById('courseFormTitle').textContent='Add New Course to Curriculum';document.getElementById('cancelCourseEditBtn').classList.add('hidden');displayCourses();populateAvailableCoursesForOffering();populateRoutineCourseSelect();populateDragCoursesList();displayCurricula();});
        function editCourse(id){const courseToEdit=courses.find(course=>course.id===id);if(courseToEdit){document.getElementById('courseName').value=courseToEdit.name;document.getElementById('courseCode').value=courseToEdit.code;document.getElementById('courseCredit').value=courseToEdit.credit;document.getElementById('courseSemester').value=courseToEdit.semester;document.getElementById('courseFaculty').value=courseToEdit.facultyId;document.getElementById('courseType').value=courseToEdit.type;document.getElementById('curriculumType').value=courseToEdit.curriculum;document.getElementById('offeredToSemester').value=courseToEdit.offeredToSemester;document.getElementById('courseTiming').value=courseToEdit.timing;document.getElementById('courseRoom').value=courseToEdit.room;editingCourseId=id;document.getElementById('addUpdateCourseBtn').textContent='Update Course';document.getElementById('courseFormTitle').textContent='Edit Course in Curriculum';document.getElementById('cancelCourseEditBtn').classList.remove('hidden');}}
        document.getElementById('cancelCourseEditBtn').addEventListener('click',()=>{addCourseForm.reset();editingCourseId=null;document.getElementById('addUpdateCourseBtn').textContent='Add Course to Curriculum';document.getElementById('courseFormTitle').textContent='Add New Course to Curriculum';document.getElementById('cancelCourseEditBtn').classList.add('hidden');});
        function deleteCourse(id){if(confirm('Are you sure you want to delete this course?')){courses=courses.filter(course=>course.id!==id);saveData('courses',courses);displayCourses();populateAvailableCoursesForOffering();populateRoutineCourseSelect();populateDragCoursesList();displayCurricula();showMessageBox('Course deleted successfully!');}}
        const displayCurriculaListDiv=document.getElementById('displayCurriculaList');
        function displayCurricula(){if(courses.length===0){displayCurriculaListDiv.innerHTML='<p class="text-gray-500 text-center">No curricula to display. Add courses to curriculum first.</p>';return;}
        const curriculaMap=courses.reduce((acc,course)=>{if(!acc[course.curriculum]){acc[course.curriculum]=[];}
        acc[course.curriculum].push(course);return acc;},{});let htmlContent='';let slCounter=1;for(const curriculumName in curriculaMap){const curriculumCourses=curriculaMap[curriculumName].sort((a,b)=>{const semesterOrder={"Foundation Semester":0,"1st Semester":1,"2nd Semester":2,"3rd Semester":3,"4th Semester":4,"5th Semester":5,"6th Semester":5,"7th Semester":7,"8th Semester":8,"Flexible":9,"Final Semester":10};const semesterA=semesterOrder[a.offeredToSemester]||99;const semesterB=semesterOrder[b.offeredToSemester]||99;if(semesterA!==semesterB)return semesterA-semesterB;return a.code.localeCompare(b.code);});htmlContent+=`
                    <div class="expandable-item" onclick="toggleExpand(this)">
                        <span>${curriculumName} <span class="text-sm text-gray-500">(${curriculumCourses.length} courses)</span></span>
                        <span class="arrow">&#9658;</span>
                    </div>
                    <div class="expandable-content">
                        <table class="min-w-full bg-white rounded-lg shadow overflow-hidden">
                            <thead>
                                <tr>
                                    <th class="py-3 px-4 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Sl</th>
                                    <th class="py-3 px-4 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Course Code</th>
                                    <th class="py-3 px-4 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Course Title</th>
                                    <th class="py-3 px-4 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Credit</th>
                                    <th class="py-3 px-4 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Type of Course</th>
                                    <th class="py-3 px-4 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Offered in Semester</th>
                                </tr>
                            </thead>
                            <tbody>
                `;curriculumCourses.forEach((course,index)=>{htmlContent+=`
                        <tr>
                            <td class="py-3 px-4 border-b border-gray-200">${index+1}</td>
                            <td class="py-3 px-4 border-b border-gray-200">${course.code}</td>
                            <td class="py-3 px-4 border-b border-gray-200">${course.name}</td>
                            <td class="py-3 px-4 border-b border-gray-200">${course.credit||'N/A'}</td>
                            <td class="py-3 px-4 border-b border-gray-200">${course.type}</td>
                            <td class="py-3 px-4 border-b border-gray-200">${course.offeredToSemester}</td>
                        </tr>
                    `;});htmlContent+=`
                            </tbody>
                        </table>
                    </div>
                `;}
        displayCurriculaListDiv.innerHTML=htmlContent;}
        const addCourseOfferingForm=document.getElementById('addCourseOfferingForm');const courseOfferingsListDiv=document.getElementById('courseOfferingsList');const displayCourseOfferingsListDiv=document.getElementById('displayCourseOfferingsList');let editingOfferingId=null;
        function populateAvailableCoursesForOffering(){const container=document.getElementById('availableCoursesForOffering');container.innerHTML='';if(courses.length===0){container.innerHTML='<p class="text-gray-500">No courses available. Add courses to curriculum first.</p>';return;}
        courses.forEach(course=>{const checkboxDiv=document.createElement('div');checkboxDiv.classList.add('flex','items-center');checkboxDiv.innerHTML=`
                    <input type="checkbox" id="offeringCourse_${course.id}" name="selectedCourses" value="${course.id}" class="h-4 w-4 text-red-600 focus:ring-red-500 border-gray-300 rounded">
                    <label for="offeringCourse_${course.id}" class="ml-2 text-gray-700 text-sm">${course.code} - ${course.name} (${course.curriculum}, ${course.offeredToSemester})</label>
                `;container.appendChild(checkboxDiv);});}
        function displayCourseOfferings(){if(courseOfferings.length===0){courseOfferingsListDiv.innerHTML='<p class="text-gray-500 text-center">No course offerings added yet.</p>';displayCourseOfferingsListDiv.innerHTML='<p class="text-gray-500 text-center">No course offerings to display.</p>';return;}
        let addRemoveTableHtml=`
                <table class="min-w-full bg-white rounded-lg shadow overflow-hidden">
                    <thead>
                        <tr>
                            <th class="py-3 px-4 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Offering Semester</th>
                            <th class="py-3 px-4 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Offered Courses (Curriculum, Target Semester)</th>
                            <th class="py-3 px-4 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Actions</th>
                        </tr>
                    </thead>
                    <tbody>
            `;courseOfferings.forEach(offering=>{const offeredCourseDetails=offering.courseIds.map(courseId=>{const course=courses.find(c=>c.id===courseId);return course?`${course.code} - ${course.name} (${course.curriculum}, ${course.offeredToSemester})`:'Unknown Course';}).join('<br>');addRemoveTableHtml+=`
                    <tr>
                        <td class="py-3 px-4 border-b border-gray-200">${offering.semester}</td>
                        <td class="py-3 px-4 border-b border-gray-200">${offeredCourseDetails}</td>
                        <td class="py-3 px-4 border-b border-gray-200">
                            <button onclick="editCourseOffering('${offering.id}')" class="text-blue-600 hover:text-blue-900 text-sm mr-2">Edit</button>
                            <button onclick="deleteCourseOffering('${offering.id}')" class="text-red-600 hover:text-red-900 text-sm">Delete</button>
                        </td>
                    </tr>
                `;});addRemoveTableHtml+=`</tbody></table>`;courseOfferingsListDiv.innerHTML=addRemoveTableHtml;let displayHtmlContent='';const uniqueSemesters=[...new Set(courseOfferings.map(o=>o.semester))].sort();uniqueSemesters.forEach(semester=>{const coursesForSemester=courseOfferings.filter(o=>o.semester===semester).flatMap(o=>o.courseIds).map(courseId=>courses.find(c=>c.id===courseId)).filter(c=>c!==undefined);displayHtmlContent+=`
                    <div class="expandable-item" onclick="toggleExpand(this)">
                        <span>${semester} <span class="text-sm text-gray-500">(${coursesForSemester.length} courses offered)</span></span>
                        <span class="arrow">&#9658;</span>
                    </div>
                    <div class="expandable-content">
                        <table class="min-w-full bg-white rounded-lg shadow overflow-hidden">
                            <thead>
                                <tr>
                                    <th class="py-3 px-4 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Sl</th>
                                    <th class="py-3 px-4 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Course Code</th>
                                    <th class="py-3 px-4 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Title</th>
                                    <th class="py-3 px-4 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Faculty</th>
                                    <th class="py-3 px-4 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Type of Course</th>
                                    <th class="py-3 px-4 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Curriculum</th>
                                </tr>
                            </thead>
                            <tbody>
                `;coursesForSemester.forEach((course,index)=>{const faculty=teachers.find(t=>t.id===course.facultyId);displayHtmlContent+=`
                        <tr>
                            <td class="py-3 px-4 border-b border-gray-200">${index+1}</td>
                            <td class="py-3 px-4 border-b border-gray-200">${course.code}</td>
                            <td class="py-3 px-4 border-b border-gray-200">${course.name}</td>
                            <td class="py-3 px-4 border-b border-gray-200">${faculty?faculty.name:'N/A'}</td>
                            <td class="py-3 px-4 border-b border-gray-200">${course.type}</td>
                            <td class="py-3 px-4 border-b border-gray-200">${course.curriculum}</td>
                        </tr>
                    `;});displayHtmlContent+=`
                            </tbody>
                        </table>
                    </div>
                `;});displayCourseOfferingsListDiv.innerHTML=displayHtmlContent;}
        addCourseOfferingForm.addEventListener('submit',event=>{event.preventDefault();const formData=new FormData(addCourseOfferingForm);const selectedCourseIds=Array.from(document.querySelectorAll('#availableCoursesForOffering input[name="selectedCourses"]:checked')).map(checkbox=>checkbox.value);if(selectedCourseIds.length===0){showMessageBox('Please select at least one course for the offering.');return;}
        const newOffering={id:editingOfferingId||Date.now().toString(),semester:formData.get('offeringSemester'),courseIds:selectedCourseIds};if(editingOfferingId){courseOfferings=courseOfferings.map(offering=>offering.id===editingOfferingId?newOffering:offering);showMessageBox('Course offering updated successfully!');}else{courseOfferings.push(newOffering);showMessageBox('Course offering added successfully!');}
        saveData('courseOfferings',courseOfferings);addCourseOfferingForm.reset();editingOfferingId=null;document.getElementById('addUpdateOfferingBtn').textContent='Add Course Offering';document.getElementById('courseOfferingFormTitle').textContent='Add Course Offering for Semester';document.getElementById('cancelOfferingEditBtn').classList.add('hidden');populateAvailableCoursesForOffering();displayCourseOfferings();});
        function editCourseOffering(id){const offeringToEdit=courseOfferings.find(offering=>offering.id===id);if(offeringToEdit){document.getElementById('offeringSemester').value=offeringToEdit.semester;document.querySelectorAll('#availableCoursesForOffering input[name="selectedCourses"]').forEach(checkbox=>{checkbox.checked=false;});offeringToEdit.courseIds.forEach(courseId=>{const checkbox=document.getElementById(`offeringCourse_${courseId}`);if(checkbox)checkbox.checked=true;});editingOfferingId=id;document.getElementById('addUpdateOfferingBtn').textContent='Update Course Offering';document.getElementById('courseOfferingFormTitle').textContent='Edit Course Offering';document.getElementById('cancelOfferingEditBtn').classList.remove('hidden');}}
        document.getElementById('cancelOfferingEditBtn').addEventListener('click',()=>{addCourseOfferingForm.reset();editingOfferingId=null;document.getElementById('addUpdateOfferingBtn').textContent='Add Course Offering';document.getElementById('courseOfferingFormTitle').textContent='Add Course Offering for Semester';document.getElementById('cancelOfferingEditBtn').classList.add('hidden');populateAvailableCoursesForOffering();});
        function deleteCourseOffering(id){if(confirm('Are you sure you want to delete this course offering?')){courseOfferings=courseOfferings.filter(offering=>offering.id!==id);saveData('courseOfferings',courseOfferings);displayCourseOfferings();showMessageBox('Course offering deleted successfully!');}}
        const addStudentForm=document.getElementById('addStudentForm');const studentsListDiv=document.getElementById('studentsList');const displayStudentsListDiv=document.getElementById('displayStudentsList');let editingStudentId=null;
        function displayStudents(){if(students.length===0){studentsListDiv.innerHTML='<p class="text-gray-500 text-center">No students added yet.</p>';displayStudentsListDiv.innerHTML='<p class="text-gray-500 text-center">No students to display.</p>';return;}
        let addRemoveTableHtml=`
                <table class="min-w-full bg-white rounded-lg shadow overflow-hidden">
                    <thead>
                        <tr>
                            <th class="py-3 px-4 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Student ID</th>
                            <th class="py-3 px-4 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Name</th>
                            <th class="py-3 px-4 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Address</th>
                            <th class="py-3 px-4 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Actions</th>
                        </tr>
                    </thead>
                    <tbody>
            `;students.forEach(student=>{addRemoveTableHtml+=`
                    <tr>
                        <td class="py-3 px-4 border-b border-gray-200">${student.id}</td>
                        <td class="py-3 px-4 border-b border-gray-200">${student.name}</td>
                        <td class="py-3 px-4 border-b border-gray-200">${student.address}</td>
                        <td class="py-3 px-4 border-b border-gray-200">
                            <button onclick="editStudent('${student.id}')" class="text-blue-600 hover:text-blue-900 text-sm mr-2">Edit</button>
                            <button onclick="deleteStudent('${student.id}')" class="text-red-600 hover:text-red-900 text-sm">Delete</button>
                        </td>
                    </tr>
                `;});addRemoveTableHtml+=`</tbody></table>`;studentsListDiv.innerHTML=addRemoveTableHtml;let displayHtmlContent='';students.forEach(student=>{const studentCourses=courses.filter(c=>c.offeredToSemester===student.currentSemester);const issuesList=student.issues.map(issue=>`<li>${issue}</li>`).join('');displayHtmlContent+=`
                    <div class="expandable-item" onclick="toggleExpand(this)">
                        <span>${student.id} - ${student.name}</span>
                        <span class="arrow">&#9658;</span>
                    </div>
                    <div class="expandable-content">
                        <p class="mb-2"><strong>Current Semester:</strong> ${student.currentSemester}</p>
                        <p class="mb-2"><strong>Curriculum:</strong> ${student.curriculum||'N/A'}</p>
                        <h4 class="font-semibold mb-2">Semester-wise Courses:</h4>
                        ${studentCourses.length>0?`
                            <table class="min-w-full bg-white rounded-lg shadow overflow-hidden text-sm mb-2">
                                <thead>
                                    <tr>
                                        <th class="py-2 px-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Code</th>
                                        <th class="py-2 px-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Title</th>
                                        <th class="py-2 px-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Credit</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    ${studentCourses.map(course=>`
                                        <tr>
                                            <td class="py-2 px-3 border-b border-gray-200">${course.code}</td>
                                            <td class="py-2 px-3 border-b border-gray-200">${course.name}</td>
                                            <td class="py-2 px-3 border-b border-gray-200">${course.credit||'N/A'}</td>
                                        </tr>
                                    `).join('')}
                                </tbody>
                            </table>
                        `:'<p class="text-gray-500 text-sm">No courses listed for this semester.</p>'}
                        <h4 class="font-semibold mb-2">Issues:</h4>
                        ${issuesList?`<ul class="list-disc ml-5 text-sm">${issuesList}</ul>`:'<p class="text-gray-500 text-sm">No issues reported.</p>'}
                    </div>
                `;});displayStudentsListDiv.innerHTML=displayHtmlContent;}
        addStudentForm.addEventListener('submit',event=>{event.preventDefault();const formData=new FormData(addStudentForm);const newStudent={id:formData.get('studentId'),name:formData.get('studentName'),address:formData.get('studentAddress'),currentSemester:'1st Semester',curriculum:'BA (OBE)',issues:[]};if(editingStudentId){students=students.map(student=>student.id===editingStudentId?newStudent:student);showMessageBox('Student updated successfully!');}else{if(students.some(s=>s.id===newStudent.id)){showMessageBox('Error: Student with this ID already exists.');return;}
        students.push(newStudent);showMessageBox('Student added successfully!');}
        saveData('students',students);addStudentForm.reset();editingStudentId=null;document.getElementById('addUpdateStudentBtn').textContent='Add Student';document.getElementById('studentFormTitle').textContent='Add New Student';document.getElementById('cancelStudentEditBtn').classList.add('hidden');displayStudents();});
        function editStudent(id){const studentToEdit=students.find(student=>student.id===id);if(studentToEdit){document.getElementById('studentName').value=studentToEdit.name;document.getElementById('studentId').value=studentToEdit.id;document.getElementById('studentId').disabled=true;document.getElementById('studentAddress').value=studentToEdit.address;editingStudentId=id;document.getElementById('addUpdateStudentBtn').textContent='Update Student';document.getElementById('studentFormTitle').textContent='Edit Student';document.getElementById('cancelStudentEditBtn').classList.remove('hidden');}}
        document.getElementById('cancelStudentEditBtn').addEventListener('click',()=>{addStudentForm.reset();editingStudentId=null;document.getElementById('studentId').disabled=false;document.getElementById('addUpdateStudentBtn').textContent='Add Student';document.getElementById('studentFormTitle').textContent='Add New Student';document.getElementById('cancelStudentEditBtn').classList.add('hidden');});
        function deleteStudent(id){if(confirm('Are you sure you want to delete this student?')){students=students.filter(student=>student.id!==id);saveData('students',students);displayStudents();showMessageBox('Student deleted successfully!');}}
        const addTeacherForm=document.getElementById('addTeacherForm');const teachersListDiv=document.getElementById('teachersList');const displayFacultyListDiv=document.getElementById('displayFacultyList');let editingTeacherId=null;
        function displayTeachers(){if(teachers.length===0){teachersListDiv.innerHTML='<p class="text-gray-500 text-center">No faculty added yet.</p>';return;}
        let addRemoveTableHtml=`
                <table class="min-w-full bg-white rounded-lg shadow overflow-hidden">
                    <thead>
                        <tr>
                            <th class="py-3 px-4 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Initials</th>
                            <th class="py-3 px-4 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Name</th>
                            <th class="py-3 px-4 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Type</th>
                            <th class="py-3 px-4 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Actions</th>
                        </tr>
                    </thead>
                    <tbody>
            `;teachers.forEach(teacher=>{addRemoveTableHtml+=`
                    <tr>
                        <td class="py-3 px-4 border-b border-gray-200">${teacher.initials}</td>
                        <td class="py-3 px-4 border-b border-gray-200">${teacher.name}</td>
                        <td class="py-3 px-4 border-b border-gray-200">${teacher.type}</td>
                        <td class="py-3 px-4 border-b border-gray-200">
                            <button onclick="editTeacher('${teacher.id}')" class="text-blue-600 hover:text-blue-900 text-sm mr-2">Edit</button>
                            <button onclick="deleteTeacher('${teacher.id}')" class="text-red-600 hover:text-red-900 text-sm">Delete</button>
                        </td>
                    </tr>
                `;});addRemoveTableHtml+=`</tbody></table>`;teachersListDiv.innerHTML=addRemoveTableHtml;}
        function displayFaculty(){if(teachers.length===0){displayFacultyListDiv.innerHTML='<p class="text-gray-500 text-center">No faculty to display.</p>';return;}
        let displayHtmlContent='';teachers.forEach(teacher=>{const facultyRoutineCourses=routineEntries.filter(entry=>{const course=courses.find(c=>c.id===entry.courseId);return course&&course.facultyId===teacher.id;}).map(entry=>{const course=courses.find(c=>c.id===entry.courseId);return{...course,day:entry.day,startTime:entry.startTime,endTime:entry.endTime,room:entry.room,loadType:'Regular Load'};});const totalCredits=facultyRoutineCourses.reduce((sum,course)=>sum+(course.credit||0),0);const routineBySemester=facultyRoutineCourses.reduce((acc,course)=>{if(!acc[course.semester]){acc[course.semester]=[];}
        acc[course.semester].push(course);return acc;},{});let coursesTableHtml='';for(const semester in routineBySemester){coursesTableHtml+=`
                        <h5 class="font-semibold mt-3 mb-1 text-gray-700">${semester} Courses:</h5>
                        <table class="min-w-full bg-white rounded-lg shadow overflow-hidden text-sm mb-2">
                            <thead>
                                <tr>
                                    <th class="py-2 px-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Code</th>
                                    <th class="py-2 px-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Title</th>
                                    <th class="py-2 px-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Credit</th>
                                    <th class="py-2 px-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Load Type</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${routineBySemester[semester].map(course=>`
                                    <tr>
                                        <td class="py-2 px-3 border-b border-gray-200">${course.code}</td>
                                        <td class="py-2 px-3 border-b border-gray-200">${course.name}</td>
                                        <td class="py-2 px-3 border-b border-gray-200">${course.credit||'N/A'}</td>
                                        <td class="py-2 px-3 border-b border-gray-200">${course.loadType}</td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    `;}
        let routineTableHtml='';if(facultyRoutineCourses.length>0){routineTableHtml=`
                        <h4 class="font-semibold mt-3 mb-2">Class Routines:</h4>
                        <table class="min-w-full bg-white rounded-lg shadow overflow-hidden text-sm">
                            <thead>
                                <tr>
                                    <th class="py-2 px-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Course</th>
                                    <th class="py-2 px-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Day</th>
                                    <th class="py-2 px-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Time</th>
                                    <th class="py-2 px-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Room</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${facultyRoutineCourses.map(course=>`
                                    <tr>
                                        <td class="py-2 px-3 border-b border-gray-200">${course.code} - ${course.name}</td>
                                        <td class="py-2 px-3 border-b border-gray-200">${course.day}</td>
                                        <td class="py-2 px-3 border-b border-gray-200">${course.startTime}-${course.endTime}</td>
                                        <td class="py-2 px-3 border-b border-gray-200">${course.room}</td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    `;}else{routineTableHtml='<p class="text-gray-500 text-sm">No class routines assigned.</p>';}
        displayHtmlContent+=`
                    <div class="expandable-item" onclick="toggleExpand(this)">
                        <span>${teacher.name} (${teacher.initials}) - ${teacher.type}</span>
                        <span class="arrow">&#9658;</span>
                    </div>
                    <div class="expandable-content">
                        <p class="mb-2"><strong>Total Credits Assigned:</strong> ${totalCredits}</p>
                        ${coursesTableHtml}
                        ${routineTableHtml}
                    </div>
                `;});displayFacultyListDiv.innerHTML=displayHtmlContent;}
        addTeacherForm.addEventListener('submit',event=>{event.preventDefault();const formData=new FormData(addTeacherForm);const newTeacher={id:editingTeacherId||Date.now().toString(),name:formData.get('teacherName'),initials:formData.get('teacherInitials').toUpperCase(),type:formData.get('teacherType')};if(editingTeacherId){teachers=teachers.map(teacher=>teacher.id===editingTeacherId?newTeacher:teacher);showMessageBox('Faculty updated successfully!');}else{teachers.push(newTeacher);showMessageBox('Faculty added successfully!');}
        saveData('teachers',teachers);addTeacherForm.reset();editingTeacherId=null;document.getElementById('addUpdateTeacherBtn').textContent='Add Faculty';document.getElementById('teacherFormTitle').textContent='Add New Faculty';document.getElementById('cancelTeacherEditBtn').classList.add('hidden');displayTeachers();displayFaculty();populateCourseFacultySelect();});
        function editTeacher(id){const teacherToEdit=teachers.find(teacher=>teacher.id===id);if(teacherToEdit){document.getElementById('teacherName').value=teacherToEdit.name;document.getElementById('teacherInitials').value=teacherToEdit.initials;document.getElementById('teacherType').value=teacherToEdit.type;editingTeacherId=id;document.getElementById('addUpdateTeacherBtn').textContent='Update Faculty';document.getElementById('teacherFormTitle').textContent='Edit Faculty';document.getElementById('cancelTeacherEditBtn').classList.remove('hidden');}}
        document.getElementById('cancelTeacherEditBtn').addEventListener('click',()=>{addTeacherForm.reset();editingTeacherId=null;document.getElementById('addUpdateTeacherBtn').textContent='Add Faculty';document.getElementById('teacherFormTitle').textContent='Add New Faculty';document.getElementById('cancelTeacherEditBtn').classList.add('hidden');});
        function deleteTeacher(id){if(confirm('Are you sure you want to delete this faculty member?')){teachers=teachers.filter(teacher=>teacher.id!==id);saveData('teachers',teachers);displayTeachers();displayFaculty();populateCourseFacultySelect();showMessageBox('Faculty deleted successfully!');}}
        const addRoutineForm=document.getElementById('addRoutineForm');const routineListDiv=document.getElementById('routineList');const displayRoutineListDiv=document.getElementById('displayRoutineList');let editingRoutineId=null;
        function populateRoutineCourseSelect(){const select=document.getElementById('routineCourse');select.innerHTML='<option value="">-- Select Course --</option>';courses.forEach(course=>{const option=document.createElement('option');option.value=course.id;option.textContent=`${course.code} - ${course.name}`;select.appendChild(option);});}
        function displayRoutine(){if(routineEntries.length===0){routineListDiv.innerHTML='<p class="text-gray-500 text-center">No routine entries added yet.</p>';displayRoutineListDiv.innerHTML='<p class="text-gray-500 text-center">No routine entries to display.</p>';return;}
        let addRemoveTableHtml=`
                <table class="min-w-full bg-white rounded-lg shadow overflow-hidden">
                    <thead>
                        <tr>
                            <th class="py-3 px-4 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Course</th>
                            <th class="py-3 px-4 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Day</th>
                            <th class="py-3 px-4 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Time</th>
                            <th class="py-3 px-4 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Room</th>
                            <th class="py-3 px-4 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Actions</th>
                        </tr>
                    </thead>
                    <tbody>
            `;routineEntries.forEach(entry=>{const course=courses.find(c=>c.id===entry.courseId);addRemoveTableHtml+=`
                    <tr>
                        <td class="py-3 px-4 border-b border-gray-200">${course?`${course.code} - ${course.name}`:'Unknown Course'}</td>
                        <td class="py-3 px-4 border-b border-gray-200">${entry.day}</td>
                        <td class="py-3 px-4 border-b border-gray-200">${entry.startTime} - ${entry.endTime}</td>
                        <td class="py-3 px-4 border-b border-gray-200">${entry.room}</td>
                        <td class="py-3 px-4 border-b border-gray-200">
                            <button onclick="editRoutineEntry('${entry.id}')" class="text-blue-600 hover:text-blue-900 text-sm mr-2">Edit</button>
                            <button onclick="deleteRoutineEntry('${entry.id}')" class="text-red-600 hover:text-red-900 text-sm">Delete</button>
                        </td>
                    </tr>
                `;});addRemoveTableHtml+=`</tbody></table>`;routineListDiv.innerHTML=addRemoveTableHtml;const routineByDay=daysOfWeek.reduce((acc,day)=>{acc[day]=routineEntries.filter(entry=>entry.day===day).sort((a,b)=>a.startTime.localeCompare(b.startTime));return acc;},{});let displayRoutineHtml=`
                <table class="min-w-full bg-white rounded-lg shadow overflow-hidden">
                    <thead>
                        <tr>
                            <th class="py-3 px-4 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Day</th>
                            <th class="py-3 px-4 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Course</th>
                            <th class="py-3 px-4 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Time</th>
                            <th class="py-3 px-4 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Room</th>
                            <th class="py-3 px-4 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Faculty</th>
                        </tr>
                    </thead>
                    <tbody>
            `;let hasRoutine=false;daysOfWeek.forEach(day=>{if(routineByDay[day].length>0){hasRoutine=true;routineByDay[day].forEach(entry=>{const course=courses.find(c=>c.id===entry.courseId);const faculty=course?teachers.find(t=>t.id===course.facultyId):null;displayRoutineHtml+=`
                            <tr>
                                <td class="py-3 px-4 border-b border-gray-200">${entry.day}</td>
                                <td class="py-3 px-4 border-b border-gray-200">${course?`${course.code} - ${course.name}`:'Unknown Course'}</td>
                                <td class="py-3 px-4 border-b border-gray-200">${entry.startTime} - ${entry.endTime}</td>
                                <td class="py-3 px-4 border-b border-gray-200">${entry.room}</td>
                                <td class="py-3 px-4 border-b border-gray-200">${faculty?faculty.name:'N/A'}</td>
                            </tr>
                        `;});}});if(!hasRoutine){displayRoutineHtml='<p class="text-gray-500 text-center">No routine entries to display.</p>';}else{displayRoutineHtml+=`</tbody></table>`;}
        displayRoutineListDiv.innerHTML=displayRoutineHtml;}
        addRoutineForm.addEventListener('submit',event=>{event.preventDefault();const formData=new FormData(addRoutineForm);const newEntry={id:editingRoutineId||Date.now().toString(),courseId:formData.get('routineCourse'),day:formData.get('routineDay'),startTime:formData.get('routineStartTime'),endTime:formData.get('routineEndTime'),room:formData.get('routineRoom')};if(editingRoutineId){routineEntries=routineEntries.map(entry=>entry.id===editingRoutineId?newEntry:entry);showMessageBox('Routine entry updated successfully!');}else{routineEntries.push(newEntry);showMessageBox('Routine entry added successfully!');}
        saveData('routineEntries',routineEntries);addRoutineForm.reset();editingRoutineId=null;document.getElementById('addUpdateRoutineBtn').textContent='Add Routine Entry';document.getElementById('routineFormTitle').textContent='Add Routine Entry';document.getElementById('cancelRoutineEditBtn').classList.add('hidden');displayRoutine();renderDragDropRoutineGrid();displayFaculty();});
        function editRoutineEntry(id){const entryToEdit=routineEntries.find(entry=>entry.id===id);if(entryToEdit){document.getElementById('routineCourse').value=entryToEdit.courseId;document.getElementById('routineDay').value=entryToEdit.day;document.getElementById('routineStartTime').value=entryToEdit.startTime;document.getElementById('routineEndTime').value=entryToEdit.endTime;document.getElementById('routineRoom').value=entryToEdit.room;editingRoutineId=id;document.getElementById('addUpdateRoutineBtn').textContent='Update Routine Entry';document.getElementById('routineFormTitle').textContent='Edit Routine Entry';document.getElementById('cancelRoutineEditBtn').classList.remove('hidden');}}
        document.getElementById('cancelRoutineEditBtn').addEventListener('click',()=>{addRoutineForm.reset();editingRoutineId=null;document.getElementById('addUpdateRoutineBtn').textContent='Add Routine Entry';document.getElementById('routineFormTitle').textContent='Add Routine Entry';document.getElementById('cancelRoutineEditBtn').classList.add('hidden');});
        function deleteRoutineEntry(id){if(confirm('Are you sure you want to delete this routine entry?')){routineEntries=routineEntries.filter(entry=>entry.id!==id);saveData('routineEntries',routineEntries);displayRoutine();renderDragDropRoutineGrid();displayFaculty();showMessageBox('Routine entry deleted successfully!');}}
        const addHolidayForm=document.getElementById('addHolidayForm');const holidaysListDiv=document.getElementById('holidaysList');const displayHolidaysListDiv=document.getElementById('displayHolidaysList');let editingHolidayId=null;
        function displayHolidaysEvents(){if(holidaysEvents.length===0){holidaysListDiv.innerHTML='<p class="text-gray-500 text-center">No events added yet.</p>';displayHolidaysListDiv.innerHTML='<p class="text-gray-500 text-center">No holidays or events to display.</p>';return;}
        let addRemoveTableHtml=`
                <table class="min-w-full bg-white rounded-lg shadow overflow-hidden">
                    <thead>
                        <tr>
                            <th class="py-3 px-4 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Date</th>
                            <th class="py-3 px-4 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Type</th>
                            <th class="py-3 px-4 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Title</th>
                            <th class="py-3 px-4 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Description</th>
                            <th class="py-3 px-4 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Actions</th>
                        </tr>
                    </thead>
                    <tbody>
            `;holidaysEvents.sort((a,b)=>new Date(a.date)-new Date(b.date)).forEach(event=>{addRemoveTableHtml+=`
                    <tr>
                        <td class="py-3 px-4 border-b border-gray-200">${event.date}</td>
                        <td class="py-3 px-4 border-b border-gray-200">${event.type}</td>
                        <td class="py-3 px-4 border-b border-gray-200">${event.title}</td>
                        <td class="py-3 px-4 border-b border-gray-200">${event.description||'N/A'}</td>
                        <td class="py-3 px-4 border-b border-gray-200">
                            <button onclick="editHolidayEvent('${event.id}')" class="text-blue-600 hover:text-blue-900 text-sm mr-2">Edit</button>
                            <button onclick="deleteHolidayEvent('${event.id}')" class="text-red-600 hover:text-red-900 text-sm">Delete</button>
                        </td>
                    </tr>
                `;});addRemoveTableHtml+=`</tbody></table>`;holidaysListDiv.innerHTML=addRemoveTableHtml;let displayHtmlContent=`
                <table class="min-w-full bg-white rounded-lg shadow overflow-hidden">
                    <thead>
                        <tr>
                            <th class="py-3 px-4 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Date</th>
                            <th class="py-3 px-4 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Type</th>
                            <th class="py-3 px-4 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Title</th>
                            <th class="py-3 px-4 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Description</th>
                        </tr>
                    </thead>
                    <tbody>
            `;holidaysEvents.sort((a,b)=>new Date(a.date)-new Date(b.date)).forEach(event=>{displayHtmlContent+=`
                    <tr>
                        <td class="py-3 px-4 border-b border-gray-200">${event.date}</td>
                        <td class="py-3 px-4 border-b border-gray-200">${event.type}</td>
                        <td class="py-3 px-4 border-b border-gray-200">${event.title}</td>
                        <td class="py-3 px-4 border-b border-gray-200">${event.description||'N/A'}</td>
                    </tr>
                `;});displayHtmlContent+=`</tbody></table>`;displayHolidaysListDiv.innerHTML=displayHtmlContent;updateHomeEvents();}
        addHolidayForm.addEventListener('submit',event=>{event.preventDefault();const formData=new FormData(addHolidayForm);const newEvent={id:editingHolidayId||Date.now().toString(),type:formData.get('eventType'),title:formData.get('eventTitle'),date:formData.get('eventDate'),description:formData.get('eventDescription')};if(editingHolidayId){holidaysEvents=holidaysEvents.map(event=>event.id===editingHolidayId?newEvent:event);showMessageBox('Event updated successfully!');}else{holidaysEvents.push(newEvent);showMessageBox('Event added successfully!');}
        saveData('holidaysEvents',holidaysEvents);addHolidayForm.reset();editingHolidayId=null;document.getElementById('addUpdateHolidayBtn').textContent='Add Event';document.getElementById('holidayFormTitle').textContent='Add New Event';document.getElementById('cancelHolidayEditBtn').classList.add('hidden');displayHolidaysEvents();});
        function editHolidayEvent(id){const eventToEdit=holidaysEvents.find(event=>event.id===id);if(eventToEdit){document.getElementById('eventType').value=eventToEdit.type;document.getElementById('eventTitle').value=eventToEdit.title;document.getElementById('eventDate').value=eventToEdit.date;document.getElementById('eventDescription').value=eventToEdit.description;editingHolidayId=id;document.getElementById('addUpdateHolidayBtn').textContent='Update Event';document.getElementById('holidayFormTitle').textContent='Edit Event';document.getElementById('cancelHolidayEditBtn').classList.remove('hidden');}}
        document.getElementById('cancelHolidayEditBtn').addEventListener('click',()=>{addHolidayForm.reset();editingHolidayId=null;document.getElementById('addUpdateHolidayBtn').textContent='Add Event';document.getElementById('holidayFormTitle').textContent='Add New Event';document.getElementById('cancelHolidayEditBtn').classList.add('hidden');});
        function deleteHolidayEvent(id){if(confirm('Are you sure you want to delete this event?')){holidaysEvents=holidaysEvents.filter(event=>event.id!==id);saveData('holidaysEvents',holidaysEvents);displayHolidaysEvents();showMessageBox('Event deleted successfully!');}}
        function updateHomeEvents(){const eventsAgendasList=document.getElementById('eventsAgendasList');const upcomingEventsList=document.getElementById('upcomingEventsList');const today=new Date();today.setHours(0,0,0,0);eventsAgendasList.innerHTML='';upcomingEventsList.innerHTML='';let hasTodayEvents=false;let hasUpcomingEvents=false;holidaysEvents.sort((a,b)=>new Date(a.date)-new Date(b.date)).forEach(event=>{const eventDate=new Date(event.date);eventDate.setHours(0,0,0,0);if(eventDate.getTime()===today.getTime()){eventsAgendasList.innerHTML+=`<p class="text-gray-700"><strong>${event.type}:</strong> ${event.title} (${event.description||'No description'})</p>`;hasTodayEvents=true;}else if(eventDate>today&&(eventDate.getTime()-today.getTime())/(1000*60*60*24)<=15){upcomingEventsList.innerHTML+=`<p class="text-gray-700"><strong>${event.date} - ${event.type}:</strong> ${event.title} (${event.description||'No description'})</p>`;hasUpcomingEvents=true;}});if(!hasTodayEvents){eventsAgendasList.innerHTML='<p class="text-gray-500">No events scheduled for today.</p>';}
        if(!hasUpcomingEvents){upcomingEventsList.innerHTML='<p class="text-gray-500">No upcoming events.</p>';}}
        const attendanceCourseSelect=document.getElementById('attendanceCourseSelect');const attendanceDateInput=document.getElementById('attendanceDate');const loadAttendanceBtn=document.getElementById('loadAttendanceBtn');const attendanceSheetDisplay=document.getElementById('attendanceSheetDisplay');const attendanceCourseTitle=document.getElementById('attendanceCourseTitle');const attendanceDateDisplay=document.getElementById('attendanceDateDisplay');const attendanceTableContainer=document.getElementById('attendanceTableContainer');const saveAttendanceBtn=document.getElementById('saveAttendanceBtn');
        function populateAttendanceCourseSelect(){attendanceCourseSelect.innerHTML='<option value="">-- Select Course --</option>';courses.forEach(course=>{const option=document.createElement('option');option.value=course.id;option.textContent=`${course.code} - ${course.name}`;attendanceCourseSelect.appendChild(option);});}
        loadAttendanceBtn.addEventListener('click',()=>{const courseId=attendanceCourseSelect.value;const date=attendanceDateInput.value;if(!courseId||!date){showMessageBox('Please select a course and a date.');return;}
        const selectedCourse=courses.find(c=>c.id===courseId);if(!selectedCourse){showMessageBox('Selected course not found.');return;}
        attendanceCourseTitle.textContent=`${selectedCourse.code} - ${selectedCourse.name}`;attendanceDateDisplay.textContent=date;attendanceSheetDisplay.classList.remove('hidden');const attendanceKey=`${courseId}_${date}`;const currentAttendance=attendanceRecords[attendanceKey]||{};let tableHtml=`
                <table class="min-w-full bg-white rounded-lg shadow overflow-hidden">
                    <thead>
                        <tr>
                            <th class="py-3 px-4 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Student ID</th>
                            <th class="py-3 px-4 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Student Name</th>
                            <th class="py-3 px-4 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Status</th>
                        </tr>
                    </thead>
                    <tbody>
            `;if(students.length===0){tableHtml+=`<tr><td colspan="3" class="py-3 px-4 text-center text-gray-500">No students registered.</td></tr>`;}else{students.forEach(student=>{const status=currentAttendance[student.id]||'present';tableHtml+=`
                        <tr>
                            <td class="py-3 px-4 border-b border-gray-200">${student.id}</td>
                            <td class="py-3 px-4 border-b border-gray-200">${student.name}</td>
                            <td class="py-3 px-4 border-b border-gray-200">
                                <select data-student-id="${student.id}" class="attendance-status focus:ring-red-500 focus:border-red-500">
                                    <option value="present" ${status==='present'?'selected':''}>Present</option>
                                    <option value="absent" ${status==='absent'?'selected':''}>Absent</option>
                                    <option value="late" ${status==='late'?'selected':''}>Late</option>
                                </select>
                            </td>
                        </tr>
                    `;});}
        tableHtml+=`</tbody></table>`;attendanceTableContainer.innerHTML=tableHtml;});
        saveAttendanceBtn.addEventListener('click',()=>{const courseId=attendanceCourseSelect.value;const date=attendanceDateInput.value;if(!courseId||!date){showMessageBox('Cannot save: Course or date not selected.');return;}
        const attendanceKey=`${courseId}_${date}`;const newAttendance={};document.querySelectorAll('.attendance-status').forEach(select=>{const studentId=select.dataset.studentId;newAttendance[studentId]=select.value;});attendanceRecords[attendanceKey]=newAttendance;saveData('attendanceRecords',attendanceRecords);showMessageBox('Attendance saved successfully!');});
        const dragCoursesList=document.getElementById('dragCoursesList');const dragDropRoutineGrid=document.getElementById('dragDropRoutineGrid').getElementsByTagName('tbody')[0];const saveRoutineGridBtn=document.getElementById('saveRoutineGridBtn');const clashReport=document.getElementById('clashReport');const clashReportList=document.getElementById('clashReportList');
        let draggedCourseData=null;const daysOfWeek=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];const timeSlots=["08:00-09:00","09:00-10:00","10:00-11:00","11:00-12:00","12:00-13:00","13:00-14:00","14:00-15:00","15:00-16:00","16:00-17:00","17:00-18:00"];
        function populateDragCoursesList(){dragCoursesList.innerHTML='';if(courses.length===0){dragCoursesList.innerHTML='<p class="text-gray-500">No courses available for drag & drop. Add courses first.</p>';return;}
        courses.forEach(course=>{const courseDiv=document.createElement('div');courseDiv.classList.add('draggable-course');courseDiv.setAttribute('draggable','true');courseDiv.dataset.courseId=course.id;courseDiv.textContent=`${course.code} - ${course.name}`;dragCoursesList.appendChild(courseDiv);});addDragEventListeners();}
        function addDragEventListeners(){document.querySelectorAll('.draggable-course').forEach(draggable=>{draggable.addEventListener('dragstart',e=>{e.target.classList.add('dragging');const courseId=e.target.dataset.courseId;draggedCourseData=courses.find(c=>c.id===courseId);e.dataTransfer.setData('text/plain',courseId);});draggable.addEventListener('dragend',e=>{e.target.classList.remove('dragging');draggedCourseData=null;});});}
        function renderDragDropRoutineGrid(){dragDropRoutineGrid.innerHTML='';timeSlots.forEach(timeSlot=>{const row=dragDropRoutineGrid.insertRow();const timeCell=row.insertCell();timeCell.classList.add('time-slot-header');timeCell.textContent=timeSlot;daysOfWeek.forEach(day=>{const cell=row.insertCell();cell.classList.add('drop-target');cell.dataset.day=day;cell.dataset.timeSlot=timeSlot;const entriesInSlot=routineEntries.filter(entry=>entry.day===day&&isTimeOverlap(entry.startTime,entry.endTime,timeSlot.split('-')[0],timeSlot.split('-')[1]));entriesInSlot.forEach(entry=>{const course=courses.find(c=>c.id===entry.courseId);if(course){const routineItem=createRoutineItem(entry.id,course.code,course.name,entry.room);cell.appendChild(routineItem);}});});});addDropEventListeners();checkClashes();}
        function createRoutineItem(entryId,courseCode,courseName,room){const routineItem=document.createElement('div');routineItem.classList.add('routine-item');routineItem.dataset.entryId=entryId;routineItem.innerHTML=`
                <span>${courseCode} (${room})</span>
                <button class="delete-btn" title="Remove">&times;</button>
            `;routineItem.querySelector('.delete-btn').addEventListener('click',e=>{e.stopPropagation();deleteRoutineEntryFromGrid(entryId);});return routineItem;}
        function addDropEventListeners(){document.querySelectorAll('.drop-target').forEach(cell=>{cell.addEventListener('dragover',e=>{e.preventDefault();cell.classList.add('drag-over');});cell.addEventListener('dragleave',()=>{cell.classList.remove('drag-over');});cell.addEventListener('drop',e=>{e.preventDefault();cell.classList.remove('drag-over');if(draggedCourseData){const day=cell.dataset.day;const timeSlot=cell.dataset.timeSlot;const [startTime,endTime]=timeSlot.split('-');const existingItem=cell.querySelector('.routine-item');if(existingItem){showMessageBox('A course already exists in this slot. Please remove it first.');return;}
        const newEntry={id:Date.now().toString(),courseId:draggedCourseData.id,day:day,startTime:startTime,endTime:endTime,room:draggedCourseData.room||'N/A'};routineEntries.push(newEntry);saveData('routineEntries',routineEntries);renderDragDropRoutineGrid();showMessageBox('Course added to routine!');}});});}
        function deleteRoutineEntryFromGrid(entryId){if(confirm('Are you sure you want to remove this course from the routine?')){routineEntries=routineEntries.filter(entry=>entry.id!==entryId);saveData('routineEntries',routineEntries);renderDragDropRoutineGrid();showMessageBox('Course removed from routine.');}}
        function isTimeOverlap(start1,end1,start2,end2){const parseTime=timeStr=>{const [hours,minutes]=timeStr.split(':').map(Number);return hours*60+minutes;};const s1=parseTime(start1);const e1=parseTime(end1);const s2=parseTime(start2);const e2=parseTime(end2);return Math.max(s1,s2)<Math.min(e1,e2);}
        function checkClashes(){clashReportList.innerHTML='';clashReport.classList.add('hidden');let hasClashes=false;const clashes=[];const routineByDay=daysOfWeek.reduce((acc,day)=>{acc[day]=routineEntries.filter(entry=>entry.day===day);return acc;},{});for(const day in routineByDay){const entriesForDay=routineByDay[day];for(let i=0;i<entriesForDay.length;i++){for(let j=i+1;j<entriesForDay.length;j++){const entry1=entriesForDay[i];const entry2=entriesForDay[j];if(isTimeOverlap(entry1.startTime,entry1.endTime,entry2.startTime,entry2.endTime)){const course1=courses.find(c=>c.id===entry1.courseId);const course2=courses.find(c=>c.id===entry2.courseId);clashes.push({day:day,entry1:course1?`${course1.code} (${entry1.startTime}-${entry1.endTime}) in ${entry1.room}`:`Unknown Course (${entry1.startTime}-${entry1.endTime})`,entry2:course2?`${course2.code} (${entry2.startTime}-${entry2.endTime}) in ${entry2.room}`:`Unknown Course (${entry2.startTime}-${entry2.endTime})`});hasClashes=true;}}}}
        if(hasClashes){clashReport.classList.remove('hidden');clashes.forEach(clash=>{const listItem=document.createElement('li');listItem.innerHTML=`<strong>${clash.day}:</strong> Clash between ${clash.entry1} and ${clash.entry2}.`;clashReportList.appendChild(listItem);});const solutionItem=document.createElement('li');solutionItem.classList.add('solution');solutionItem.textContent='Solution: Adjust times or rooms for conflicting courses.';clashReportList.appendChild(solutionItem);}}
        saveRoutineGridBtn.addEventListener('click',()=>{saveData('routineEntries',routineEntries);renderDragDropRoutineGrid();showMessageBox('Routine saved successfully!');});
        const courseOutlineForm=document.getElementById('courseOutlineForm');const generatedOutlinePreview=document.getElementById('generatedOutlinePreview');
        document.getElementById('addLearningOutcomeBtn').addEventListener('click',()=>{const container=document.getElementById('learningOutcomesContainer');const div=document.createElement('div');div.classList.add('flex','items-center','space-x-2');div.innerHTML=`
                <input type="text" name="learningOutcome" placeholder="e.g., Analyze literary texts critically" class="flex-grow focus:ring-red-500 focus:border-red-500">
                <button type="button" class="btn-secondary px-3 py-1 text-sm remove-item-btn" onclick="this.parentNode.remove()">Remove</button>
            `;container.appendChild(div);});
        document.getElementById('addWeeklyScheduleBtn').addEventListener('click',()=>{const container=document.getElementById('weeklyScheduleContainer');const weekNumber=container.children.length+1;const div=document.createElement('div');div.classList.add('border','p-4','rounded-md','space-y-2');div.innerHTML=`
                <label class="block text-gray-700 text-sm font-bold mb-2">Week ${weekNumber}:</label>
                <input type="text" name="weeklyTopic" placeholder="Topic for Week ${weekNumber}" class="focus:ring-red-500 focus:border-red-500">
                <input type="text" name="weeklyReading" placeholder="Readings for Week ${weekNumber} (Optional)" class="focus:ring-red-500 focus:border-red-500">
                <button type="button" class="btn-secondary px-3 py-1 text-sm remove-item-btn" onclick="this.parentNode.remove()">Remove Week</button>
            `;container.appendChild(div);});
        document.getElementById('addAssessmentMethodBtn').addEventListener('click',()=>{const container=document.getElementById('assessmentMethodsContainer');const div=document.createElement('div');div.classList.add('grid','grid-cols-3','gap-2','items-center');div.innerHTML=`
                <input type="text" name="assessmentType" placeholder="e.g., Midterm Exam" class="focus:ring-red-500 focus:border-red-500">
                <input type="number" name="assessmentPercentage" placeholder="Percentage (%)" min="0" max="100" class="focus:ring-red-500 focus:border-red-500">
                <button type="button" class="btn-secondary px-3 py-1 text-sm remove-item-btn" onclick="this.parentNode.remove()">Remove</button>
            `;container.appendChild(div);});
        document.getElementById('addRequiredReadingBtn').addEventListener('click',()=>{const container=document.getElementById('requiredReadingsContainer');const div=document.createElement('div');div.classList.add('flex','items-center','space-x-2');div.innerHTML=`
                <input type="text" name="requiredReading" placeholder="e.g., Author, Title, Year" class="flex-grow focus:ring-red-500 focus:border-red-500">
                <button type="button" class="btn-secondary px-3 py-1 text-sm remove-item-btn" onclick="this.parentNode.remove()">Remove</button>
            `;container.appendChild(div);});
        courseOutlineForm.addEventListener('submit',event=>{event.preventDefault();generateCourseOutline();});
        function generateCourseOutline(){const formData=new FormData(courseOutlineForm);const courseName=formData.get('outlineCourseName');const courseCode=formData.get('outlineCourseCode');const creditHours=formData.get('outlineCreditHours');const semester=formData.get('outlineSemester');const facultyName=formData.get('outlineFacultyName');const room=formData.get('outlineRoom');const timing=formData.get('outlineTiming');const description=formData.get('outlineDescription');const objectives=formData.get('outlineObjectives');const gradingPolicy=formData.get('gradingPolicy');const attendancePolicy=formData.get('attendancePolicy');const academicIntegrity=formData.get('academicIntegrity');const learningOutcomes=Array.from(document.querySelectorAll('#learningOutcomesContainer input[name="learningOutcome"]')).map(input=>input.value.trim()).filter(value=>value!=='');const weeklySchedule=[];document.querySelectorAll('#weeklyScheduleContainer > div').forEach((weekDiv,index)=>{const topic=weekDiv.querySelector('input[name="weeklyTopic"]').value.trim();const reading=weekDiv.querySelector('input[name="weeklyReading"]').value.trim();if(topic){weeklySchedule.push({week:index+1,topic,reading});}});const assessmentMethods=[];document.querySelectorAll('#assessmentMethodsContainer > div').forEach(assessmentDiv=>{const type=assessmentDiv.querySelector('input[name="assessmentType"]').value.trim();const percentage=assessmentDiv.querySelector('input[name="assessmentPercentage"]').value.trim();if(type&&percentage){assessmentMethods.push({type,percentage:`${percentage}%`});}});const requiredReadings=Array.from(document.querySelectorAll('#requiredReadingsContainer input[name="requiredReading"]')).map(input=>input.value.trim()).filter(value=>value!=='');let outlineHtml=`
                <div class="p-4 md:p-8 bg-white rounded-lg shadow-lg">
                    <h1 class="text-3xl font-bold text-center text-red-700 mb-2">Course Outline</h1>
                    <h2 class="text-xl font-semibold text-center text-gray-700 mb-6">${courseName} (${courseCode})</h2>
                    <div class="mb-6">
                        <h3 class="text-lg font-semibold text-gray-800 mb-2">Course Information</h3>
                        <p class="text-gray-700"><strong class="font-medium">Credit Hours:</strong> ${creditHours}</p>
                        <p class="text-gray-700"><strong class="font-medium">Semester:</strong> ${semester}</p>
                        <p class="text-gray-700"><strong class="font-medium">Faculty:</strong> ${facultyName}</p>
                        ${room?`<p class="text-gray-700"><strong class="font-medium">Room:</strong> ${room}</p>`:''}
                        ${timing?`<p class="text-gray-700"><strong class="font-medium">Class Timing:</strong> ${timing}</p>`:''}
                    </div>
                    <div class="mb-6">
                        <h3 class="text-lg font-semibold text-gray-800 mb-2">Course Description</h3>
                        <p class="text-gray-700 leading-relaxed">${description}</p>
                    </div>
                    <div class="mb-6">
                        <h3 class="text-lg font-semibold text-gray-800 mb-2">Course Objectives</h3>
                        <p class="text-gray-700 leading-relaxed">${objectives}</p>
                    </div>
            `;if(learningOutcomes.length>0){outlineHtml+=`
                    <div class="mb-6">
                        <h3 class="text-lg font-semibold text-gray-800 mb-2">Learning Outcomes</h3>
                        <ul class="list-disc pl-5 text-gray-700 space-y-1">
                            ${learningOutcomes.map(item=>`<li>${item}</li>`).join('')}
                        </ul>
                    </div>
                `;}
        if(weeklySchedule.length>0){outlineHtml+=`
                    <div class="mb-6">
                        <h3 class="text-lg font-semibold text-gray-800 mb-2">Weekly Schedule</h3>
                        <table class="min-w-full border border-gray-300 outline-table">
                            <thead>
                                <tr>
                                    <th class="py-2 px-3 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider border border-gray-300">Week</th>
                                    <th class="py-2 px-3 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider border border-gray-300">Topic</th>
                                    <th class="py-2 px-3 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider border border-gray-300">Readings</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${weeklySchedule.map(week=>`
                                    <tr>
                                        <td class="py-2 px-3 border border-gray-300">${week.week}</td>
                                        <td class="py-2 px-3 border border-gray-300">${week.topic}</td>
                                        <td class="py-2 px-3 border border-gray-300">${week.reading||'N/A'}</td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    </div>
                `;}
        if(assessmentMethods.length>0){outlineHtml+=`
                    <div class="mb-6">
                        <h3 class="text-lg font-semibold text-gray-800 mb-2">Assessment Methods</h3>
                        <table class="min-w-full border border-gray-300 outline-table">
                            <thead>
                                <tr>
                                    <th class="py-2 px-3 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider border border-gray-300">Type</th>
                                    <th class="py-2 px-3 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider border border-gray-300">Percentage</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${assessmentMethods.map(method=>`
                                    <tr>
                                        <td class="py-2 px-3 border border-gray-300">${method.type}</td>
                                        <td class="py-2 px-3 border border-gray-300">${method.percentage}</td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    </div>
                `;}
        if(requiredReadings.length>0){outlineHtml+=`
                    <div class="mb-6">
                        <h3 class="text-lg font-semibold text-gray-800 mb-2">Required Readings / Textbooks</h3>
                        <ul class="list-disc pl-5 text-gray-700 space-y-1">
                            ${requiredReadings.map(item=>`<li>${item}</li>`).join('')}
                        </ul>
                    </div>
                `;}
        if(gradingPolicy){outlineHtml+=`
                    <div class="mb-6">
                        <h3 class="text-lg font-semibold text-gray-800 mb-2">Grading Policy</h3>
                        <p class="text-gray-700 leading-relaxed">${gradingPolicy}</p>
                    </div>
                `;}
        if(attendancePolicy){outlineHtml+=`
                    <div class="mb-6">
                        <h3 class="text-lg font-semibold text-gray-800 mb-2">Attendance Policy</h3>
                        <p class="text-gray-700 leading-relaxed">${attendancePolicy}</p>
                    </div>
                `;}
        if(academicIntegrity){outlineHtml+=`
                    <div class="mb-6">
                        <h3 class="text-lg font-semibold text-gray-800 mb-2">Academic Integrity Statement</h3>
                        <p class="text-gray-700 leading-relaxed">${academicIntegrity}</p>
                    </div>
                `;}
        outlineHtml+=`</div>`;generatedOutlinePreview.innerHTML=outlineHtml;showMessageBox('Course Outline Generated!');}
        const loginForm=document.getElementById('loginForm');const usernameInput=document.getElementById('username');const passwordInput=document.getElementById('password');const loginError=document.getElementById('loginError');const loginSection=document.getElementById('loginSection');const mainContent=document.getElementById('mainContent');const logoutButton=document.getElementById('logoutButton');const keepLoggedInCheckbox=document.getElementById('keepLoggedIn');
        loginForm.addEventListener('submit',event=>{event.preventDefault();const username=usernameInput.value;const password=passwordInput.value;const correctUsername='admnell';const correctPassword='@420IN3ll';if(username===correctUsername&&password===correctPassword){isLoggedIn=true;if(keepLoggedInCheckbox.checked){localStorage.setItem('isLoggedIn','true');}else{localStorage.removeItem('isLoggedIn');}
        loginSection.classList.add('hidden');mainContent.classList.remove('hidden');loginError.classList.add('hidden');initializeApp();}else{loginError.classList.remove('hidden');}});
        logoutButton.addEventListener('click',()=>{isLoggedIn=false;localStorage.removeItem('isLoggedIn');mainContent.classList.add('hidden');loginSection.classList.remove('hidden');usernameInput.value='';passwordInput.value='';loginError.classList.add('hidden');showMessageBox('Logged out successfully.');});
        function updateDateTimeOnHomeButton(){const now=new Date();const options={weekday:'short',month:'short',day:'numeric',hour:'2-digit',minute:'2-digit',hour12:true};navHomeButton.textContent=now.toLocaleDateString('en-US',options);}
        setInterval(updateDateTimeOnHomeButton,60000);
        function toggleExpand(element){const content=element.nextElementSibling;if(content&&content.classList.contains('expandable-content')){element.classList.toggle('active');content.classList.toggle('active');}}
        function addBACurriculumCourses(){const curriculumName="BA (OBE)";const defaultFacultyId='unknown-faculty';const defaultTiming='TBD';const defaultRoom='TBD';const gedCourses=[{code:"0231ENG1101",name:"Communicative English",credit:3,type:"GED",offeredToSemester:"1st Semester"},{code:"0231ENG1102",name:"Reading and Writing",credit:3,type:"GED",offeredToSemester:"1st Semester"},{code:"0232ENG1103",name:"Bangla Language",credit:3,type:"GED",offeredToSemester:"1st Semester"},{code:"0222ENG1104",name:"History of the Emergence of Bangladesh",credit:3,type:"GED",offeredToSemester:"1st Semester"},{code:"0222ENG1105",name:"Social History of South Asia",credit:3,type:"GED",offeredToSemester:"1st Semester"},{code:"0231ENG1201",name:"Advanced Composition",credit:3,type:"GED",offeredToSemester:"2nd Semester"},{code:"0611ENG1202",name:"Introduction to Computer Applications I",credit:3,type:"GED",offeredToSemester:"2nd Semester"},{code:"0314ENG1203",name:"Introduction to Sociology",credit:3,type:"GED",offeredToSemester:"2nd Semester"},{code:"0314ENG2302",name:"Introduction to Anthropology",credit:3,type:"GED",offeredToSemester:"3rd Semester"},{code:"0223ENG2303",name:"Introduction to Philosophy",credit:3,type:"GED",offeredToSemester:"3rd Semester"},{code:"0313ENG3501",name:"Introduction to Psychology",credit:3,type:"GED",offeredToSemester:"5th Semester"}];const coreCourses=[{code:"0232ENG1204",name:"Introduction to Prose",credit:3,type:"Core Course",offeredToSemester:"2nd Semester"},{code:"0232ENG1205",name:"Introduction to Poetry",credit:3,type:"Core Course",offeredToSemester:"2nd Semester"},{code:"0232ENG2301",name:"Introduction to Linguistics",credit:3,type:"Core Course",offeredToSemester:"3rd Semester"},{code:"0222ENG2304",name:"History of Europe",credit:3,type:"Core Course",offeredToSemester:"3rd Semester"},{code:"0232ENG2305",name:"English Phonetics and Phonology",credit:3,type:"Core Course",offeredToSemester:"3rd Semester"},{code:"0232ENG2401",name:"16th, 17th and Restoration Literature",credit:3,type:"Core Course",offeredToSemester:"4th Semester"},{code:"0222ENG2402",name:"History of English Language",credit:3,type:"Core Course",offeredToSemester:"4th Semester"},{code:"0232ENG2403",name:"18th Century Literature",credit:3,type:"Core Course",offeredToSemester:"4th Semester"},{code:"0232ENG2404",name:"Shakespeare",credit:3,type:"Core Course",offeredToSemester:"4th Semester"},{code:"0111ENG2405",name:"Research Methodology",credit:3,type:"Core Course",offeredToSemester:"4th Semester"},{code:"0232ENG3502",name:"Romantic Poetry",credit:3,type:"Core Course",offeredToSemester:"5th Semester"},{code:"0232ENG3503",name:"19th Century Literature",credit:3,type:"Core Course",offeredToSemester:"5th Semester"},{code:"0232ENG3504",name:"World Classics",credit:3,type:"Core Course",offeredToSemester:"5th Semester"},{code:"0232ENG3505",name:"Postcolonial Theory and Literature",credit:3,type:"Core Course",offeredToSemester:"5th Semester"},{code:"0232ENG3506",name:"Semantics and Pragmatics",credit:3,type:"Core Course",offeredToSemester:"5th Semester"},{code:"0232ENG3601",name:"Introduction to ELT",credit:3,type:"Core Course",offeredToSemester:"6th Semester"},{code:"0232ENG3602",name:"English Morphology and Syntax",credit:3,type:"Core Course",offeredToSemester:"6th Semester"},{code:"0232ENG3603",name:"Stylistics",credit:3,type:"Core Course",offeredToSemester:"6th Semester"},{code:"0232ENG3604",name:"Introduction to Feminist Literature",credit:3,type:"Core Course",offeredToSemester:"6th Semester"},{code:"0232ENG3605",name:"Literary Criticism",credit:3,type:"Core Course",offeredToSemester:"6th Semester"},{code:"0232ENG3606",name:"American Literature I",credit:3,type:"Core Course",offeredToSemester:"6th Semester"},{code:"0232ENG4701",name:"World Englishes",credit:3,type:"Core Course",offeredToSemester:"7th Semester"},{code:"0232ENG4702",name:"Discourse Analysis",credit:3,type:"Core Course",offeredToSemester:"7th Semester"},{code:"0232ENG4703",name:"Psycholinguistics",credit:3,type:"Core Course",offeredToSemester:"7th Semester"},{code:"0232ENG4704",name:"Sociolinguistics",credit:3,type:"Core Course",offeredToSemester:"7th Semester"},{code:"0314ENG4705",name:"Introduction to Critical and Cultural Theories",credit:3,type:"Core Course",offeredToSemester:"7th Semester"},{code:"0232ENG4706",name:"The Modern Novel",credit:3,type:"Core Course",offeredToSemester:"7th Semester"},{code:"0232ENG4801",name:"American Literature II",credit:3,type:"Core Course",offeredToSemester:"8th Semester"},{code:"0232ENG4802",name:"Media and Literature",credit:3,type:"Core Course",offeredToSemester:"8th Semester"},{code:"0231ENG4803",name:"Second Language Acquisition",credit:3,type:"Core Course",offeredToSemester:"8th Semester"},{code:"0232ENG4804",name:"Contemporary Continental Literature",credit:3,type:"Core Course",offeredToSemester:"8th Semester"},{code:"0232ENG4805",name:"20th Century Literature",credit:3,type:"Core Course",offeredToSemester:"8th Semester"},{code:"0232ENG4806",name:"Advanced Stylistics",credit:3,type:"Core Course",offeredToSemester:"8th Semester"}];const allNewCourses=[...gedCourses,...coreCourses];allNewCourses.forEach(newCourseData=>{const courseId=`${curriculumName.replace(/\s/g,'-')}_${newCourseData.code}_${newCourseData.name.replace(/[^a-zA-Z0-9]/g,'')}`;const existingCourse=courses.find(c=>c.id===courseId);if(!existingCourse){const newCourse={id:courseId,name:newCourseData.name,code:newCourseData.code,credit:newCourseData.credit,semester:'N/A',facultyId:defaultFacultyId,type:newCourseData.type,curriculum:curriculumName,offeredToSemester:newCourseData.offeredToSemester,timing:defaultTiming,room:defaultRoom};courses.push(newCourse);}});saveData('courses',courses);console.log(`Added/checked ${allNewCourses.length} courses for ${curriculumName} curriculum.`);}
        function addMATESOLCurriculumCourses(){const curriculumName="MA in TESOL (OBE)";const defaultFacultyId='unknown-faculty';const defaultTiming='TBD';const defaultRoom='TBD';const tesolCourses=[{code:"0231ENG5101",name:"Introduction to Graduate Studies and Research",credit:3,type:"Core Course",offeredToSemester:"1st Semester"},{code:"0231ENG5102",name:"Translation Studies",credit:3,type:"Core Course",offeredToSemester:"1st Semester"},{code:"0232ENG5101",name:"Foundations in Linguistics",credit:3,type:"Core Course",offeredToSemester:"1st Semester"},{code:"0232ENG5102",name:"Advanced Sociolinguistics",credit:3,type:"Core Course",offeredToSemester:"1st Semester"},{code:"0232ENG5201",name:"Advanced Psycholinguistics",credit:3,type:"Core Course",offeredToSemester:"2nd Semester"},{code:"0231ENG5304",name:"Shakespeare Studies",credit:3,type:"Core Course",offeredToSemester:"2nd Semester"},{code:"0232ENG5202",name:"TESOL Material Development",credit:3,type:"Core Course",offeredToSemester:"2nd Semester"},{code:"0232ENG5203",name:"Measurement and Evaluation for TESOL",credit:3,type:"Core Course",offeredToSemester:"2nd Semester"},{code:"0232ENG5204",name:"Teaching English at the Secondary and Tertiary Levels",credit:3,type:"Core Course",offeredToSemester:"2nd Semester"},{code:"0232ENG5301",name:"Theories of Language Learning and Teaching to Speakers of Other Languages",credit:3,type:"Core Course",offeredToSemester:"3rd Semester"},{code:"0232ENG5302",name:"Methods and Techniques for TESOL",credit:3,type:"Core Course",offeredToSemester:"3rd Semester"},{code:"0232ENG5203",name:"Dynamics of Language Policy and Planning in Bangladesh",credit:3,type:"Core Course",offeredToSemester:"3rd Semester"},{code:"0232ENG5204",name:"TESOL in Bangladesh",credit:3,type:"Core Course",offeredToSemester:"3rd Semester"},{code:"0232ENG5305",name:"Practicum for Teaching English to Speakers of Other Languages",credit:3,type:"Core Course",offeredToSemester:"3rd Semester"},{code:"0232ENG6101",name:"Thesis/TESOL",credit:6,type:"Core Course",offeredToSemester:"4th Semester"},{code:"0232ENG5306",name:"Seminar in Teaching English as a Second or Foreign Language",credit:3,type:"Core Course",offeredToSemester:"4th Semester"},{code:"0231ENG6102",name:"ELT Syllabus Design",credit:3,type:"Core Course",offeredToSemester:"4th Semester"},{code:"0231ENG6103",name:"Critical Discourse Analysis",credit:3,type:"Core Course",offeredToSemester:"4th Semester"},{code:"0231ENG5307",name:"Digital Humanities",credit:3,type:"Core Course",offeredToSemester:"4th Semester"},{code:"0231ENG5205",name:"Cultural and Media Studies",credit:3,type:"Core Course",offeredToSemester:"4th Semester"},{code:"0232ENG2304",name:"English Phonetics and Phonology (Foundation)",credit:3,type:"Core Course",offeredToSemester:"Foundation Semester"},{code:"0232ENG3505",name:"Semantics and Pragmatics (Foundation)",credit:3,type:"Core Course",offeredToSemester:"Foundation Semester"},{code:"0232ENG3506",name:"Introduction to ELT (Foundation)",credit:3,type:"Core Course",offeredToSemester:"Foundation Semester"},{code:"0232ENG3601",name:"Stylistics (Foundation)",credit:3,type:"Core Course",offeredToSemester:"Foundation Semester"},{code:"0232ENG3606",name:"Discourse Analysis (Foundation)",credit:3,type:"Core Course",offeredToSemester:"Foundation Semester"}];tesolCourses.forEach(newCourseData=>{const courseId=`${curriculumName.replace(/\s/g,'-')}_${newCourseData.code}_${newCourseData.name.replace(/[^a-zA-Z0-9]/g,'')}`;const existingCourse=courses.find(c=>c.id===courseId);if(!existingCourse){const newCourse={id:courseId,name:newCourseData.name,code:newCourseData.code,credit:newCourseData.credit,semester:'N/A',facultyId:defaultFacultyId,type:newCourseData.type,curriculum:curriculumName,offeredToSemester:newCourseData.offeredToSemester,timing:defaultTiming,room:defaultRoom};courses.push(newCourse);}});saveData('courses',courses);console.log(`Added/checked ${tesolCourses.length} courses for ${curriculumName} curriculum.`);}
        function addMAOBECurriculumCourses(){const curriculumName="MA (OBE)";const defaultFacultyId='unknown-faculty';const defaultTiming='TBD';const defaultRoom='TBD';const maCourses=[{code:"0231ENG5101",name:"Introduction to Graduate Studies and Research",credit:3,type:"Core Course",offeredToSemester:"1st Semester"},{code:"0231ENG5102",name:"Translation Studies",credit:3,type:"Core Course",offeredToSemester:"1st Semester"},{code:"0231ENG5103",name:"Origin and Development of the English Language",credit:3,type:"Core Course",offeredToSemester:"1st Semester"},{code:"0231ENG5104",name:"Modern Classics in English Translation",credit:3,type:"Core Course",offeredToSemester:"1st Semester"},{code:"0231ENG5105",name:"Postcolonial Fiction and Poetry",credit:3,type:"Core Course",offeredToSemester:"1st Semester"},{code:"0231ENG5201",name:"Introduction to Creative Writing",credit:3,type:"Elective",offeredToSemester:"2nd Semester"},{code:"0231ENG5202",name:"Contemporary British Literature: 1950 to the Present",credit:3,type:"Elective",offeredToSemester:"2nd Semester"},{code:"0231ENG5203",name:"Postmodern American Fiction from 1945 to 1999",credit:3,type:"Elective",offeredToSemester:"2nd Semester"},{code:"0231ENG5204",name:"Comparative Literature",credit:3,type:"Elective",offeredToSemester:"2nd Semester"},{code:"0231ENG5205",name:"Cultural and Media Studies",credit:3,type:"Elective",offeredToSemester:"2nd Semester"},{code:"0231ENG5301",name:"South Asian Literature in English",credit:3,type:"Elective",offeredToSemester:"3rd Semester"},{code:"0231ENG5302",name:"Latin American Literature in English Translation",credit:3,type:"Elective",offeredToSemester:"3rd Semester"},{code:"0231ENG5303",name:"Critical Theory",credit:3,type:"Core Course",offeredToSemester:"3rd Semester"},{code:"0231ENG5304",name:"Shakespeare Studies",credit:3,type:"Core Course",offeredToSemester:"3rd Semester"},{code:"0231ENG5305",name:"Studies in African Literature",credit:3,type:"Elective",offeredToSemester:"Flexible"},{code:"0231ENG5305",name:"Thesis",credit:6,type:"Thesis",offeredToSemester:"Final Semester"},{code:"0231ENG5307",name:"Digital Humanities",credit:3,type:"Elective",offeredToSemester:"Flexible"},{code:"0231ENG5308",name:"Contemporary American Drama: 1980 to the Present",credit:3,type:"Elective",offeredToSemester:"Flexible"},{code:"0231ENG5309",name:"Contemporary Literary Theory",credit:3,type:"Core Course",offeredToSemester:"Flexible"},{code:"0231ENG5310",name:"Transcultural Feminism",credit:3,type:"Elective",offeredToSemester:"Flexible"},{code:"0231ENG5311",name:"Literature and Ecology",credit:3,type:"Elective",offeredToSemester:"Flexible"},{code:"0231ENG5312",name:"Basic Readings in Postcolonial Literary Criticism",credit:3,type:"Core Course",offeredToSemester:"Flexible"},{code:"0231ENG5314",name:"Studies in World Literature",credit:3,type:"Elective",offeredToSemester:"Flexible"}];maCourses.forEach(newCourseData=>{const courseId=`${curriculumName.replace(/\s/g,'-')}_${newCourseData.code}_${newCourseData.name.replace(/[^a-zA-Z0-9]/g,'')}`;const existingCourse=courses.find(c=>c.id===courseId);if(!existingCourse){const newCourse={id:courseId,name:newCourseData.name,code:newCourseData.code,credit:newCourseData.credit,semester:'N/A',facultyId:defaultFacultyId,type:newCourseData.type,curriculum:curriculumName,offeredToSemester:newCourseData.offeredToSemester,timing:defaultTiming,room:defaultRoom};courses.push(newCourse);}});saveData('courses',courses);console.log(`Added/checked ${maCourses.length} courses for ${curriculumName} curriculum.`);}
        function addBANonOBECurriculumCourses(){const curriculumName="BA (Non-OBE)";const defaultFacultyId='unknown-faculty';const defaultTiming='TBD';const defaultRoom='TBD';const baNonObeCourses=[{code:"GED 101",name:"Bangladesh Studies",credit:3,type:"GED",offeredToSemester:"1st Semester"},{code:"GED 111/CSE 101",name:"Introduction to Computer Applications 1",credit:3,type:"GED",offeredToSemester:"1st Semester"},{code:"GED 112/CSE 102",name:"Introduction to Computer Applications 2",credit:3,type:"GED",offeredToSemester:"1st Semester"},{code:"GED 113/ENG 101",name:"Communicative English",credit:3,type:"GED",offeredToSemester:"1st Semester"},{code:"GED 114/ENG 102",name:"Writing Skills",credit:3,type:"GED",offeredToSemester:"1st Semester"},{code:"GED 115/ENG 103",name:"Advanced Composition",credit:3,type:"GED",offeredToSemester:"2nd Semester"},{code:"GED 116/SGS 101",name:"Introduction to Sociology",credit:3,type:"GED",offeredToSemester:"2nd Semester"},{code:"BAN 101",name:"Bangla Language",credit:3,type:"GED",offeredToSemester:"1st Semester"},{code:"SGS 106",name:"History of the Emergence of Bangladesh",credit:3,type:"GED",offeredToSemester:"1st Semester"},{code:"BUS 131",name:"Introduction to Psychology",credit:3,type:"GED",offeredToSemester:"3rd Semester"},{code:"CHN 102",name:"Introduction to Chinese Language and Culture",credit:3,type:"Optional General Education",offeredToSemester:"Flexible"},{code:"ENG 104",name:"Introduction to Literature",credit:3,type:"Core Course",offeredToSemester:"2nd Semester"},{code:"ENG 105",name:"Introduction to Linguistics",credit:3,type:"Core Course",offeredToSemester:"2nd Semester"},{code:"ENG 201",name:"English Phonetics and Phonology",credit:3,type:"Core Course",offeredToSemester:"3rd Semester"},{code:"ENG 202",name:"16th and 17th Century Literature",credit:3,type:"Core Course",offeredToSemester:"3rd Semester"},{code:"ENG 203",name:"Studies in European History",credit:3,type:"Core Course",offeredToSemester:"3rd Semester"},{code:"ENG 205",name:"Restoration and 18th Century Literature",credit:3,type:"Core Course",offeredToSemester:"4th Semester"},{code:"ENG 206",name:"Modern Western Philosophical Thoughts",credit:3,type:"Core Course",offeredToSemester:"4th Semester"},{code:"ENG 207",name:"The Romantic Period",credit:3,type:"Core Course",offeredToSemester:"4th Semester"},{code:"ENG 208",name:"19th Century Literature",credit:3,type:"Core Course",offeredToSemester:"5th Semester"},{code:"ENG 209",name:"English Morphology and Syntax",credit:3,type:"Core Course",offeredToSemester:"5th Semester"},{code:"ENG 210",name:"Research Methodology",credit:3,type:"Core Course",offeredToSemester:"5th Semester"},{code:"ENG 211",name:"History of English Language",credit:3,type:"Core Course",offeredToSemester:"5th Semester"},{code:"ENG 301",name:"Semantics and Pragmatics",credit:3,type:"Core Course",offeredToSemester:"6th Semester"},{code:"ENG 302",name:"Post Colonial Theory and Literature",credit:3,type:"Core Course",offeredToSemester:"6th Semester"},{code:"ENG 303",name:"Shakespeare",credit:3,type:"Core Course",offeredToSemester:"6th Semester"},{code:"ENG 304",name:"Literary Criticism",credit:3,type:"Core Course",offeredToSemester:"6th Semester"},{code:"ENG 306",name:"Discourse Analysis",credit:3,type:"Core Course",offeredToSemester:"7th Semester"},{code:"ENG 308",name:"Introduction to ELT",credit:3,type:"Core Course",offeredToSemester:"7th Semester"},{code:"ENG 309",name:"Old and Middle English",credit:3,type:"Core Course",offeredToSemester:"7th Semester"},{code:"ENG 311",name:"Sociolinguistics",credit:3,type:"Core Course",offeredToSemester:"7th Semester"},{code:"ENG 312",name:"Stylistics",credit:3,type:"Core Course",offeredToSemester:"8th Semester"},{code:"ENG 402",name:"Feminist Readings of Literature",credit:3,type:"Core Course",offeredToSemester:"8th Semester"},{code:"ENG 403",name:"American Literature 1",credit:3,type:"Core Course",offeredToSemester:"8th Semester"},{code:"ENG 404",name:"The Modern Novel",credit:3,type:"Core Course",offeredToSemester:"8th Semester"},{code:"ENG 405",name:"Cultural Studies",credit:3,type:"Core Course",offeredToSemester:"Flexible"},{code:"ENG 406",name:"World Classics in Translation",credit:3,type:"Core Course",offeredToSemester:"Flexible"},{code:"ENG 407",name:"American Literature 2",credit:3,type:"Core Course",offeredToSemester:"Flexible"},{code:"ENG 408",name:"Contemporary Continental Literature",credit:3,type:"Core Course",offeredToSemester:"Flexible"},{code:"ENG 409",name:"Media and Literature",credit:3,type:"Core Course",offeredToSemester:"Flexible"},{code:"ENG 410",name:"20th Century Literature",credit:3,type:"Core Course",offeredToSemester:"Flexible"},{code:"ENG 415",name:"Second Language Acquisition",credit:3,type:"Core Course",offeredToSemester:"Flexible"},{code:"ENG 416",name:"Psycholinguistics",credit:3,type:"Core Course",offeredToSemester:"Flexible"},{code:"ENG 424",name:"Dissertation/Advanced Stylistics",credit:3,type:"Core Course",offeredToSemester:"Final Semester"}];baNonObeCourses.forEach(newCourseData=>{const courseId=`${curriculumName.replace(/\s/g,'-')}_${newCourseData.code}_${newCourseData.name.replace(/[^a-zA-Z0-9]/g,'')}`;const existingCourse=courses.find(c=>c.id===courseId);if(!existingCourse){const newCourse={id:courseId,name:newCourseData.name,code:newCourseData.code,credit:newCourseData.credit,semester:'N/A',facultyId:defaultFacultyId,type:newCourseData.type,curriculum:curriculumName,offeredToSemester:newCourseData.offeredToSemester,timing:defaultTiming,room:defaultRoom};courses.push(newCourse);}});saveData('courses',courses);console.log(`Added/checked ${baNonObeCourses.length} courses for ${curriculumName} curriculum.`);}
        function initializeApp(){showLoading();courses=JSON.parse(localStorage.getItem('courses'))||[];students=JSON.parse(localStorage.getItem('students'))||[];teachers=JSON.parse(localStorage.getItem('teachers'))||[];courseOfferings=JSON.parse(localStorage.getItem('courseOfferings'))||[];routineEntries=JSON.parse(localStorage.getItem('routineEntries'))||[];holidaysEvents=JSON.parse(localStorage.getItem('holidaysEvents'))||[];attendanceRecords=JSON.parse(localStorage.getItem('attendanceRecords'))||{};addBACurriculumCourses();addMATESOLCurriculumCourses();addMAOBECurriculumCourses();addBANonOBECurriculumCourses();showSection('homeSection',document.getElementById('navHomeButton'));populateCourseFacultySelect();populateRoutineCourseSelect();populateAvailableCoursesForOffering();populateAttendanceCourseSelect();populateDragCoursesList();renderDragDropRoutineGrid();displayCourses();displayCurricula();displayCourseOfferings();displayStudents();displayTeachers();displayFaculty();displayRoutine();displayHolidaysEvents();updateHomeEvents();updateDateTimeOnHomeButton();hideLoading();}
        document.getElementById('messageBoxClose').addEventListener('click',hideMessageBox);
        document.addEventListener('DOMContentLoaded',()=>{if(isLoggedIn){loginSection.classList.add('hidden');mainContent.classList.remove('hidden');initializeApp();}else{loginSection.classList.remove('hidden');mainContent.classList.add('hidden');}});
    </script>
</body>
</html>